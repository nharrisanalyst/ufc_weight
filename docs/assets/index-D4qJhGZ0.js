(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function ne(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Aa(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Zi(t){let e,n,i;t.length!==2?(e=ne,n=(s,c)=>ne(t(s),c),i=(s,c)=>t(s)-c):(e=t===ne||t===Aa?t:Sa,n=t,i=t);function r(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<0?u=l+1:f=l}while(u<f)}return u}function a(s,c,u=0,f=s.length){if(u<f){if(e(c,c)!==0)return f;do{const l=u+f>>>1;n(s[l],c)<=0?u=l+1:f=l}while(u<f)}return u}function o(s,c,u=0,f=s.length){const l=r(s,c,u,f-1);return l>u&&i(s[l-1],c)>-i(s[l],c)?l-1:l}return{left:r,center:o,right:a}}function Sa(){return 0}function Ca(t){return t===null?NaN:+t}const Ea=Zi(ne),Ta=Ea.right;Zi(Ca).center;class Un extends Map{constructor(e,n=Oa){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(Wn(this,e))}has(e){return super.has(Wn(this,e))}set(e,n){return super.set(Pa(this,e),n)}delete(e){return super.delete(Ra(this,e))}}function Wn({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function Pa({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function Ra({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function Oa(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Ia=Math.sqrt(50),Da=Math.sqrt(10),Fa=Math.sqrt(2);function ce(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=Ia?10:a>=Da?5:a>=Fa?2:1;let s,c,u;return r<0?(u=Math.pow(10,-r)/o,s=Math.round(t*u),c=Math.round(e*u),s/u<t&&++s,c/u>e&&--c,u=-u):(u=Math.pow(10,r)*o,s=Math.round(t/u),c=Math.round(e/u),s*u<t&&++s,c*u>e&&--c),c<s&&.5<=n&&n<2?ce(t,e,n*2):[s,c,u]}function La(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,a,o]=i?ce(e,t,n):ce(t,e,n);if(!(a>=r))return[];const s=a-r+1,c=new Array(s);if(i)if(o<0)for(let u=0;u<s;++u)c[u]=(a-u)/-o;else for(let u=0;u<s;++u)c[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)c[u]=(r+u)/-o;else for(let u=0;u<s;++u)c[u]=(r+u)*o;return c}function tn(t,e,n){return e=+e,t=+t,n=+n,ce(t,e,n)[2]}function Ha(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?tn(e,t,n):tn(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function qa(t,e){let n;if(e===void 0)for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of t)(r=e(r,++i,t))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Ba(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(r);++i<r;)a[i]=t+i*n;return a}function za(t){return t}var Be=1,ze=2,en=3,Ot=4,Yn=1e-6;function ja(t){return"translate("+t+",0)"}function Va(t){return"translate(0,"+t+")"}function Xa(t){return e=>+t(e)}function Ua(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function Wa(){return!this.__axis}function Ki(t,e){var n=[],i=null,r=null,a=6,o=6,s=3,c=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=t===Be||t===Ot?-1:1,f=t===Ot||t===ze?"x":"y",l=t===Be||t===en?ja:Va;function h(d){var p=i??(e.ticks?e.ticks.apply(e,n):e.domain()),y=r??(e.tickFormat?e.tickFormat.apply(e,n):za),_=Math.max(a,0)+s,g=e.range(),x=+g[0]+c,b=+g[g.length-1]+c,m=(e.bandwidth?Ua:Xa)(e.copy(),c),v=d.selection?d.selection():d,N=v.selectAll(".domain").data([null]),k=v.selectAll(".tick").data(p,e).order(),A=k.exit(),E=k.enter().append("g").attr("class","tick"),C=k.select("line"),M=k.select("text");N=N.merge(N.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(E),C=C.merge(E.append("line").attr("stroke","currentColor").attr(f+"2",u*a)),M=M.merge(E.append("text").attr("fill","currentColor").attr(f,u*_).attr("dy",t===Be?"0em":t===en?"0.71em":"0.32em")),d!==v&&(N=N.transition(d),k=k.transition(d),C=C.transition(d),M=M.transition(d),A=A.transition(d).attr("opacity",Yn).attr("transform",function(w){return isFinite(w=m(w))?l(w+c):this.getAttribute("transform")}),E.attr("opacity",Yn).attr("transform",function(w){var $=this.parentNode.__axis;return l(($&&isFinite($=$(w))?$:m(w))+c)})),A.remove(),N.attr("d",t===Ot||t===ze?o?"M"+u*o+","+x+"H"+c+"V"+b+"H"+u*o:"M"+c+","+x+"V"+b:o?"M"+x+","+u*o+"V"+c+"H"+b+"V"+u*o:"M"+x+","+c+"H"+b),k.attr("opacity",1).attr("transform",function(w){return l(m(w)+c)}),C.attr(f+"2",u*a),M.attr(f,u*_).text(y),v.filter(Wa).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ze?"start":t===Ot?"end":"middle"),v.each(function(){this.__axis=m})}return h.scale=function(d){return arguments.length?(e=d,h):e},h.ticks=function(){return n=Array.from(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:Array.from(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:Array.from(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(c=+d,h):c},h}function Ya(t){return Ki(en,t)}function Ga(t){return Ki(Ot,t)}var Za={value:()=>{}};function Ji(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ie(n)}function ie(t){this._=t}function Ka(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ie.prototype=Ji.prototype={constructor:ie,on:function(t,e){var n=this._,i=Ka(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=Ja(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=Gn(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Gn(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ie(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Ja(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Gn(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=Za,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var nn="http://www.w3.org/1999/xhtml";const Zn={svg:"http://www.w3.org/2000/svg",xhtml:nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ae(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Zn.hasOwnProperty(e)?{space:Zn[e],local:t}:t}function Qa(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===nn&&e.documentElement.namespaceURI===nn?e.createElement(t):e.createElementNS(n,t)}}function to(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Qi(t){var e=Ae(t);return(e.local?to:Qa)(e)}function eo(){}function mn(t){return t==null?eo:function(){return this.querySelector(t)}}function no(t){typeof t!="function"&&(t=mn(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new B(i,this._parents)}function io(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ro(){return[]}function tr(t){return t==null?ro:function(){return this.querySelectorAll(t)}}function ao(t){return function(){return io(t.apply(this,arguments))}}function oo(t){typeof t=="function"?t=ao(t):t=tr(t);for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(i.push(t.call(c,c.__data__,u,o)),r.push(c));return new B(i,r)}function er(t){return function(){return this.matches(t)}}function nr(t){return function(e){return e.matches(t)}}var so=Array.prototype.find;function co(t){return function(){return so.call(this.children,t)}}function uo(){return this.firstElementChild}function fo(t){return this.select(t==null?uo:co(typeof t=="function"?t:nr(t)))}var lo=Array.prototype.filter;function ho(){return Array.from(this.children)}function po(t){return function(){return lo.call(this.children,t)}}function yo(t){return this.selectAll(t==null?ho:po(typeof t=="function"?t:nr(t)))}function go(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new B(i,this._parents)}function ir(t){return new Array(t.length)}function _o(){return new B(this._enter||this._groups.map(ir),this._parents)}function ue(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ue.prototype={constructor:ue,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mo(t){return function(){return t}}function vo(t,e,n,i,r,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):n[o]=new ue(t,a[o]);for(;o<c;++o)(s=e[o])&&(r[o]=s)}function xo(t,e,n,i,r,a,o){var s,c,u=new Map,f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=o.call(c,c.__data__,s,e)+"",u.has(d)?r[s]=c:u.set(d,c));for(s=0;s<l;++s)d=o.call(t,a[s],s,a)+"",(c=u.get(d))?(i[s]=c,c.__data__=a[s],u.delete(d)):n[s]=new ue(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u.get(h[s])===c&&(r[s]=c)}function bo(t){return t.__data__}function wo(t,e){if(!arguments.length)return Array.from(this,bo);var n=e?xo:vo,i=this._parents,r=this._groups;typeof t!="function"&&(t=mo(t));for(var a=r.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=i[u],l=r[u],h=l.length,d=$o(t.call(f,f&&f.__data__,u,i)),p=d.length,y=s[u]=new Array(p),_=o[u]=new Array(p),g=c[u]=new Array(h);n(f,l,y,_,g,d,e);for(var x=0,b=0,m,v;x<p;++x)if(m=y[x]){for(x>=b&&(b=x+1);!(v=_[b])&&++b<p;);m._next=v||null}}return o=new B(o,i),o._enter=s,o._exit=c,o}function $o(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Mo(){return new B(this._exit||this._groups.map(ir),this._parents)}function No(t,e,n){var i=this.enter(),r=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function ko(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,a=i.length,o=Math.min(r,a),s=new Array(r),c=0;c<o;++c)for(var u=n[c],f=i[c],l=u.length,h=s[c]=new Array(l),d,p=0;p<l;++p)(d=u[p]||f[p])&&(h[p]=d);for(;c<r;++c)s[c]=n[c];return new B(s,this._parents)}function Ao(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function So(t){t||(t=Co);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,c=r[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new B(r,this._parents).order()}function Co(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Eo(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function To(){return Array.from(this)}function Po(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function Ro(){let t=0;for(const e of this)++t;return t}function Oo(){return!this.node()}function Io(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function Do(t){return function(){this.removeAttribute(t)}}function Fo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Lo(t,e){return function(){this.setAttribute(t,e)}}function Ho(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function qo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Bo(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function zo(t,e){var n=Ae(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Fo:Do:typeof e=="function"?n.local?Bo:qo:n.local?Ho:Lo)(n,e))}function rr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function jo(t){return function(){this.style.removeProperty(t)}}function Vo(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Xo(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Uo(t,e,n){return arguments.length>1?this.each((e==null?jo:typeof e=="function"?Xo:Vo)(t,e,n??"")):$t(this.node(),t)}function $t(t,e){return t.style.getPropertyValue(e)||rr(t).getComputedStyle(t,null).getPropertyValue(e)}function Wo(t){return function(){delete this[t]}}function Yo(t,e){return function(){this[t]=e}}function Go(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Zo(t,e){return arguments.length>1?this.each((e==null?Wo:typeof e=="function"?Go:Yo)(t,e)):this.node()[t]}function ar(t){return t.trim().split(/^|\s+/)}function vn(t){return t.classList||new or(t)}function or(t){this._node=t,this._names=ar(t.getAttribute("class")||"")}or.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function sr(t,e){for(var n=vn(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function cr(t,e){for(var n=vn(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Ko(t){return function(){sr(this,t)}}function Jo(t){return function(){cr(this,t)}}function Qo(t,e){return function(){(e.apply(this,arguments)?sr:cr)(this,t)}}function ts(t,e){var n=ar(t+"");if(arguments.length<2){for(var i=vn(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?Qo:e?Ko:Jo)(n,e))}function es(){this.textContent=""}function ns(t){return function(){this.textContent=t}}function is(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function rs(t){return arguments.length?this.each(t==null?es:(typeof t=="function"?is:ns)(t)):this.node().textContent}function as(){this.innerHTML=""}function os(t){return function(){this.innerHTML=t}}function ss(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function cs(t){return arguments.length?this.each(t==null?as:(typeof t=="function"?ss:os)(t)):this.node().innerHTML}function us(){this.nextSibling&&this.parentNode.appendChild(this)}function fs(){return this.each(us)}function ls(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function hs(){return this.each(ls)}function ds(t){var e=typeof t=="function"?t:Qi(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ps(){return null}function ys(t,e){var n=typeof t=="function"?t:Qi(t),i=e==null?ps:typeof e=="function"?e:mn(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function gs(){var t=this.parentNode;t&&t.removeChild(this)}function _s(){return this.each(gs)}function ms(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vs(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xs(t){return this.select(t?vs:ms)}function bs(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ws(t){return function(e){t.call(this,e,this.__data__)}}function $s(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function Ms(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function Ns(t,e,n){return function(){var i=this.__on,r,a=ws(e);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=e;return}}this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function ks(t,e,n){var i=$s(t+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(r=0,f=s[c];r<a;++r)if((o=i[r]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?Ns:Ms,r=0;r<a;++r)this.each(s(i[r],e,n));return this}function ur(t,e,n){var i=rr(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function As(t,e){return function(){return ur(this,t,e)}}function Ss(t,e){return function(){return ur(this,t,e.apply(this,arguments))}}function Cs(t,e){return this.each((typeof e=="function"?Ss:As)(t,e))}function*Es(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length,o;r<a;++r)(o=i[r])&&(yield o)}var fr=[null];function B(t,e){this._groups=t,this._parents=e}function Vt(){return new B([[document.documentElement]],fr)}function Ts(){return this}B.prototype=Vt.prototype={constructor:B,select:no,selectAll:oo,selectChild:fo,selectChildren:yo,filter:go,data:wo,enter:_o,exit:Mo,join:No,merge:ko,selection:Ts,order:Ao,sort:So,call:Eo,nodes:To,node:Po,size:Ro,empty:Oo,each:Io,attr:zo,style:Uo,property:Zo,classed:ts,text:rs,html:cs,raise:fs,lower:hs,append:ds,insert:ys,remove:_s,clone:xs,datum:bs,on:ks,dispatch:Cs,[Symbol.iterator]:Es};function Kn(t){return typeof t=="string"?new B([[document.querySelector(t)]],[document.documentElement]):new B([[t]],fr)}function xn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function lr(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Xt(){}var Ht=.7,fe=1/Ht,xt="\\s*([+-]?\\d+)\\s*",qt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",J="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ps=/^#([0-9a-f]{3,8})$/,Rs=new RegExp(`^rgb\\(${xt},${xt},${xt}\\)$`),Os=new RegExp(`^rgb\\(${J},${J},${J}\\)$`),Is=new RegExp(`^rgba\\(${xt},${xt},${xt},${qt}\\)$`),Ds=new RegExp(`^rgba\\(${J},${J},${J},${qt}\\)$`),Fs=new RegExp(`^hsl\\(${qt},${J},${J}\\)$`),Ls=new RegExp(`^hsla\\(${qt},${J},${J},${qt}\\)$`),Jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};xn(Xt,gt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qn,formatHex:Qn,formatHex8:Hs,formatHsl:qs,formatRgb:ti,toString:ti});function Qn(){return this.rgb().formatHex()}function Hs(){return this.rgb().formatHex8()}function qs(){return hr(this).formatHsl()}function ti(){return this.rgb().formatRgb()}function gt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ps.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ei(e):n===3?new q(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Yt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Yt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Rs.exec(t))?new q(e[1],e[2],e[3],1):(e=Os.exec(t))?new q(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Is.exec(t))?Yt(e[1],e[2],e[3],e[4]):(e=Ds.exec(t))?Yt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Fs.exec(t))?ri(e[1],e[2]/100,e[3]/100,1):(e=Ls.exec(t))?ri(e[1],e[2]/100,e[3]/100,e[4]):Jn.hasOwnProperty(t)?ei(Jn[t]):t==="transparent"?new q(NaN,NaN,NaN,0):null}function ei(t){return new q(t>>16&255,t>>8&255,t&255,1)}function Yt(t,e,n,i){return i<=0&&(t=e=n=NaN),new q(t,e,n,i)}function Bs(t){return t instanceof Xt||(t=gt(t)),t?(t=t.rgb(),new q(t.r,t.g,t.b,t.opacity)):new q}function rn(t,e,n,i){return arguments.length===1?Bs(t):new q(t,e,n,i??1)}function q(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}xn(q,rn,lr(Xt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ht:Math.pow(Ht,t),new q(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new q(pt(this.r),pt(this.g),pt(this.b),le(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ni,formatHex:ni,formatHex8:zs,formatRgb:ii,toString:ii}));function ni(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}`}function zs(){return`#${dt(this.r)}${dt(this.g)}${dt(this.b)}${dt((isNaN(this.opacity)?1:this.opacity)*255)}`}function ii(){const t=le(this.opacity);return`${t===1?"rgb(":"rgba("}${pt(this.r)}, ${pt(this.g)}, ${pt(this.b)}${t===1?")":`, ${t})`}`}function le(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function pt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function dt(t){return t=pt(t),(t<16?"0":"")+t.toString(16)}function ri(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new W(t,e,n,i)}function hr(t){if(t instanceof W)return new W(t.h,t.s,t.l,t.opacity);if(t instanceof Xt||(t=gt(t)),!t)return new W;if(t instanceof W)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,c=(a+r)/2;return s?(e===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+r:2-a-r,o*=60):s=c>0&&c<1?0:o,new W(o,s,c,t.opacity)}function js(t,e,n,i){return arguments.length===1?hr(t):new W(t,e,n,i??1)}function W(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}xn(W,js,lr(Xt,{brighter(t){return t=t==null?fe:Math.pow(fe,t),new W(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ht:Math.pow(Ht,t),new W(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new q(je(t>=240?t-240:t+120,r,i),je(t,r,i),je(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new W(ai(this.h),Gt(this.s),Gt(this.l),le(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=le(this.opacity);return`${t===1?"hsl(":"hsla("}${ai(this.h)}, ${Gt(this.s)*100}%, ${Gt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ai(t){return t=(t||0)%360,t<0?t+360:t}function Gt(t){return Math.max(0,Math.min(1,t||0))}function je(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const bn=t=>()=>t;function Vs(t,e){return function(n){return t+n*e}}function Xs(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function Us(t){return(t=+t)==1?dr:function(e,n){return n-e?Xs(e,n,t):bn(isNaN(e)?n:e)}}function dr(t,e){var n=e-t;return n?Vs(t,n):bn(isNaN(t)?e:t)}const he=function t(e){var n=Us(e);function i(r,a){var o=n((r=rn(r)).r,(a=rn(a)).r),s=n(r.g,a.g),c=n(r.b,a.b),u=dr(r.opacity,a.opacity);return function(f){return r.r=o(f),r.g=s(f),r.b=c(f),r.opacity=u(f),r+""}}return i.gamma=t,i}(1);function Ws(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=t[r]*(1-a)+e[r]*a;return i}}function Ys(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Gs(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=wn(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function Zs(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function U(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ks(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=wn(t[r],e[r]):i[r]=e[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(an.source,"g");function Js(t){return function(){return t}}function Qs(t){return function(e){return t(e)+""}}function pr(t,e){var n=an.lastIndex=Ve.lastIndex=0,i,r,a,o=-1,s=[],c=[];for(t=t+"",e=e+"";(i=an.exec(t))&&(r=Ve.exec(e));)(a=r.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,c.push({i:o,x:U(i,r)})),n=Ve.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Qs(c[0].x):Js(e):(e=c.length,function(u){for(var f=0,l;f<e;++f)s[(l=c[f]).i]=l.x(u);return s.join("")})}function wn(t,e){var n=typeof e,i;return e==null||n==="boolean"?bn(e):(n==="number"?U:n==="string"?(i=gt(e))?(e=i,he):pr:e instanceof gt?he:e instanceof Date?Zs:Ys(e)?Ws:Array.isArray(e)?Gs:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Ks:U)(t,e)}function tc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var oi=180/Math.PI,on={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function yr(t,e,n,i,r,a){var o,s,c;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,c/=s),t*i<e*n&&(t=-t,e=-e,c=-c,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(e,t)*oi,skewX:Math.atan(c)*oi,scaleX:o,scaleY:s}}var Zt;function ec(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?on:yr(e.a,e.b,e.c,e.d,e.e,e.f)}function nc(t){return t==null||(Zt||(Zt=document.createElementNS("http://www.w3.org/2000/svg","g")),Zt.setAttribute("transform",t),!(t=Zt.transform.baseVal.consolidate()))?on:(t=t.matrix,yr(t.a,t.b,t.c,t.d,t.e,t.f))}function gr(t,e,n,i){function r(u){return u.length?u.pop()+" ":""}function a(u,f,l,h,d,p){if(u!==l||f!==h){var y=d.push("translate(",null,e,null,n);p.push({i:y-4,x:U(u,l)},{i:y-2,x:U(f,h)})}else(l||h)&&d.push("translate("+l+e+h+n)}function o(u,f,l,h){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),h.push({i:l.push(r(l)+"rotate(",null,i)-2,x:U(u,f)})):f&&l.push(r(l)+"rotate("+f+i)}function s(u,f,l,h){u!==f?h.push({i:l.push(r(l)+"skewX(",null,i)-2,x:U(u,f)}):f&&l.push(r(l)+"skewX("+f+i)}function c(u,f,l,h,d,p){if(u!==l||f!==h){var y=d.push(r(d)+"scale(",null,",",null,")");p.push({i:y-4,x:U(u,l)},{i:y-2,x:U(f,h)})}else(l!==1||h!==1)&&d.push(r(d)+"scale("+l+","+h+")")}return function(u,f){var l=[],h=[];return u=t(u),f=t(f),a(u.translateX,u.translateY,f.translateX,f.translateY,l,h),o(u.rotate,f.rotate,l,h),s(u.skewX,f.skewX,l,h),c(u.scaleX,u.scaleY,f.scaleX,f.scaleY,l,h),u=f=null,function(d){for(var p=-1,y=h.length,_;++p<y;)l[(_=h[p]).i]=_.x(d);return l.join("")}}}var ic=gr(ec,"px, ","px)","deg)"),rc=gr(nc,", ",")",")"),Mt=0,It=0,Et=0,_r=1e3,de,Dt,pe=0,_t=0,Se=0,Bt=typeof performance=="object"&&performance.now?performance:Date,mr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function $n(){return _t||(mr(ac),_t=Bt.now()+Se)}function ac(){_t=0}function ye(){this._call=this._time=this._next=null}ye.prototype=vr.prototype={constructor:ye,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?$n():+n)+(e==null?0:+e),!this._next&&Dt!==this&&(Dt?Dt._next=this:de=this,Dt=this),this._call=t,this._time=n,sn()},stop:function(){this._call&&(this._call=null,this._time=1/0,sn())}};function vr(t,e,n){var i=new ye;return i.restart(t,e,n),i}function oc(){$n(),++Mt;for(var t=de,e;t;)(e=_t-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Mt}function si(){_t=(pe=Bt.now())+Se,Mt=It=0;try{oc()}finally{Mt=0,cc(),_t=0}}function sc(){var t=Bt.now(),e=t-pe;e>_r&&(Se-=e,pe=t)}function cc(){for(var t,e=de,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:de=n);Dt=t,sn(i)}function sn(t){if(!Mt){It&&(It=clearTimeout(It));var e=t-_t;e>24?(t<1/0&&(It=setTimeout(si,t-Bt.now()-Se)),Et&&(Et=clearInterval(Et))):(Et||(pe=Bt.now(),Et=setInterval(sc,_r)),Mt=1,mr(si))}}function ci(t,e,n){var i=new ye;return e=e==null?0:+e,i.restart(r=>{i.stop(),t(r+e)},e,n),i}var uc=Ji("start","end","cancel","interrupt"),fc=[],xr=0,ui=1,cn=2,re=3,fi=4,un=5,ae=6;function Ce(t,e,n,i,r,a){var o=t.__transition;if(!o)t.__transition={};else if(n in o)return;lc(t,n,{name:e,index:i,group:r,on:uc,tween:fc,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:xr})}function Mn(t,e){var n=Y(t,e);if(n.state>xr)throw new Error("too late; already scheduled");return n}function it(t,e){var n=Y(t,e);if(n.state>re)throw new Error("too late; already running");return n}function Y(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function lc(t,e,n){var i=t.__transition,r;i[e]=n,n.timer=vr(a,0,n.time);function a(u){n.state=ui,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var f,l,h,d;if(n.state!==ui)return c();for(f in i)if(d=i[f],d.name===n.name){if(d.state===re)return ci(o);d.state===fi?(d.state=ae,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[f]):+f<e&&(d.state=ae,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[f])}if(ci(function(){n.state===re&&(n.state=fi,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=cn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===cn){for(n.state=re,r=new Array(h=n.tween.length),f=0,l=-1;f<h;++f)(d=n.tween[f].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=d);r.length=l+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=un,1),l=-1,h=r.length;++l<h;)r[l].call(t,f);n.state===un&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=ae,n.timer.stop(),delete i[e];for(var u in i)return;delete t.__transition}}function hc(t,e){var n=t.__transition,i,r,a=!0,o;if(n){e=e==null?null:e+"";for(o in n){if((i=n[o]).name!==e){a=!1;continue}r=i.state>cn&&i.state<un,i.state=ae,i.timer.stop(),i.on.call(r?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[o]}a&&delete t.__transition}}function dc(t){return this.each(function(){hc(this,t)})}function pc(t,e){var n,i;return function(){var r=it(this,t),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function yc(t,e,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=it(this,t),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:e,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===e){r[c]=s;break}c===u&&r.push(s)}a.tween=r}}function gc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=Y(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===t)return o.value;return null}return this.each((e==null?pc:yc)(n,t,e))}function Nn(t,e,n){var i=t._id;return t.each(function(){var r=it(this,i);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return Y(r,i).value[e]}}function br(t,e){var n;return(typeof e=="number"?U:e instanceof gt?he:(n=gt(e))?(e=n,he):pr)(t,e)}function _c(t){return function(){this.removeAttribute(t)}}function mc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vc(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttribute(t);return o===r?null:o===i?a:a=e(i=o,n)}}function xc(t,e,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===i?a:a=e(i=o,n)}}function bc(t,e,n){var i,r,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(t):(o=this.getAttribute(t),c=s+"",o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,s)))}}function wc(t,e,n){var i,r,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),c=s+"",o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,s)))}}function $c(t,e){var n=Ae(t),i=n==="transform"?rc:br;return this.attrTween(t,typeof e=="function"?(n.local?wc:bc)(n,i,Nn(this,"attr."+t,e)):e==null?(n.local?mc:_c)(n):(n.local?xc:vc)(n,i,e))}function Mc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Nc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function kc(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Nc(t,a)),n}return r._value=e,r}function Ac(t,e){var n,i;function r(){var a=e.apply(this,arguments);return a!==i&&(n=(i=a)&&Mc(t,a)),n}return r._value=e,r}function Sc(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=Ae(t);return this.tween(n,(i.local?kc:Ac)(i,e))}function Cc(t,e){return function(){Mn(this,t).delay=+e.apply(this,arguments)}}function Ec(t,e){return e=+e,function(){Mn(this,t).delay=e}}function Tc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Cc:Ec)(e,t)):Y(this.node(),e).delay}function Pc(t,e){return function(){it(this,t).duration=+e.apply(this,arguments)}}function Rc(t,e){return e=+e,function(){it(this,t).duration=e}}function Oc(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Pc:Rc)(e,t)):Y(this.node(),e).duration}function Ic(t,e){if(typeof e!="function")throw new Error;return function(){it(this,t).ease=e}}function Dc(t){var e=this._id;return arguments.length?this.each(Ic(e,t)):Y(this.node(),e).ease}function Fc(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;it(this,t).ease=n}}function Lc(t){if(typeof t!="function")throw new Error;return this.each(Fc(this._id,t))}function Hc(t){typeof t!="function"&&(t=er(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new ot(i,this._parents,this._name,this._id)}function qc(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<i;++s)o[s]=e[s];return new ot(o,this._parents,this._name,this._id)}function Bc(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function zc(t,e,n){var i,r,a=Bc(e)?Mn:it;return function(){var o=a(this,t),s=o.on;s!==i&&(r=(i=s).copy()).on(e,n),o.on=r}}function jc(t,e){var n=this._id;return arguments.length<2?Y(this.node(),n).on.on(t):this.each(zc(n,t,e))}function Vc(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Xc(){return this.on("end.remove",Vc(this._id))}function Uc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=mn(t));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s=i[o],c=s.length,u=a[o]=new Array(c),f,l,h=0;h<c;++h)(f=s[h])&&(l=t.call(f,f.__data__,h,s))&&("__data__"in f&&(l.__data__=f.__data__),u[h]=l,Ce(u[h],e,n,h,u,Y(f,n)));return new ot(a,this._parents,e,n)}function Wc(t){var e=this._name,n=this._id;typeof t!="function"&&(t=tr(t));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var c=i[s],u=c.length,f,l=0;l<u;++l)if(f=c[l]){for(var h=t.call(f,f.__data__,l,c),d,p=Y(f,n),y=0,_=h.length;y<_;++y)(d=h[y])&&Ce(d,e,n,y,h,p);a.push(h),o.push(f)}return new ot(a,o,e,n)}var Yc=Vt.prototype.constructor;function Gc(){return new Yc(this._groups,this._parents)}function Zc(t,e){var n,i,r;return function(){var a=$t(this,t),o=(this.style.removeProperty(t),$t(this,t));return a===o?null:a===n&&o===i?r:r=e(n=a,i=o)}}function wr(t){return function(){this.style.removeProperty(t)}}function Kc(t,e,n){var i,r=n+"",a;return function(){var o=$t(this,t);return o===r?null:o===i?a:a=e(i=o,n)}}function Jc(t,e,n){var i,r,a;return function(){var o=$t(this,t),s=n(this),c=s+"";return s==null&&(c=s=(this.style.removeProperty(t),$t(this,t))),o===c?null:o===i&&c===r?a:(r=c,a=e(i=o,s))}}function Qc(t,e){var n,i,r,a="style."+e,o="end."+a,s;return function(){var c=it(this,t),u=c.on,f=c.value[a]==null?s||(s=wr(e)):void 0;(u!==n||r!==f)&&(i=(n=u).copy()).on(o,r=f),c.on=i}}function tu(t,e,n){var i=(t+="")=="transform"?ic:br;return e==null?this.styleTween(t,Zc(t,i)).on("end.style."+t,wr(t)):typeof e=="function"?this.styleTween(t,Jc(t,i,Nn(this,"style."+t,e))).each(Qc(this._id,t)):this.styleTween(t,Kc(t,i,e),n).on("end.style."+t,null)}function eu(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function nu(t,e,n){var i,r;function a(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&eu(t,o,n)),i}return a._value=e,a}function iu(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,nu(t,e,n??""))}function ru(t){return function(){this.textContent=t}}function au(t){return function(){var e=t(this);this.textContent=e??""}}function ou(t){return this.tween("text",typeof t=="function"?au(Nn(this,"text",t)):ru(t==null?"":t+""))}function su(t){return function(e){this.textContent=t.call(this,e)}}function cu(t){var e,n;function i(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&su(r)),e}return i._value=t,i}function uu(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,cu(t))}function fu(){for(var t=this._name,e=this._id,n=$r(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,c,u=0;u<s;++u)if(c=o[u]){var f=Y(c,e);Ce(c,t,n,u,o,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new ot(i,this._parents,t,n)}function lu(){var t,e,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--r===0&&a()}};n.each(function(){var u=it(this,i),f=u.on;f!==t&&(e=(t=f).copy(),e._.cancel.push(s),e._.interrupt.push(s),e._.end.push(c)),u.on=e}),r===0&&a()})}var hu=0;function ot(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function $r(){return++hu}var rt=Vt.prototype;ot.prototype={constructor:ot,select:Uc,selectAll:Wc,selectChild:rt.selectChild,selectChildren:rt.selectChildren,filter:Hc,merge:qc,selection:Gc,transition:fu,call:rt.call,nodes:rt.nodes,node:rt.node,size:rt.size,empty:rt.empty,each:rt.each,on:jc,attr:$c,attrTween:Sc,style:tu,styleTween:iu,text:ou,textTween:uu,remove:Xc,tween:gc,delay:Tc,duration:Oc,ease:Dc,easeVarying:Lc,end:lu,[Symbol.iterator]:rt[Symbol.iterator]};function du(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var pu={time:null,delay:0,duration:250,ease:du};function yu(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function gu(t){var e,n;t instanceof ot?(e=t._id,t=t._name):(e=$r(),(n=pu).time=$n(),t=t==null?null:t+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&Ce(c,t,e,u,o,n||yu(c,e));return new ot(i,this._parents,t,e)}Vt.prototype.interrupt=dc;Vt.prototype.transition=gu;var li={},Xe={},Ue=34,Tt=10,We=13;function Mr(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function _u(t,e){var n=Mr(t);return function(i,r){return e(n(i),r,t)}}function hi(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var r in i)r in e||n.push(e[r]=r)}),n}function L(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function mu(t){return t<0?"-"+L(-t,6):t>9999?"+"+L(t,6):L(t,4)}function vu(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":mu(t.getUTCFullYear())+"-"+L(t.getUTCMonth()+1,2)+"-"+L(t.getUTCDate(),2)+(r?"T"+L(e,2)+":"+L(n,2)+":"+L(i,2)+"."+L(r,3)+"Z":i?"T"+L(e,2)+":"+L(n,2)+":"+L(i,2)+"Z":n||e?"T"+L(e,2)+":"+L(n,2)+"Z":"")}function xu(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(l,h){var d,p,y=r(l,function(_,g){if(d)return d(_,g-1);p=_,d=h?_u(_,h):Mr(_)});return y.columns=p||[],y}function r(l,h){var d=[],p=l.length,y=0,_=0,g,x=p<=0,b=!1;l.charCodeAt(p-1)===Tt&&--p,l.charCodeAt(p-1)===We&&--p;function m(){if(x)return Xe;if(b)return b=!1,li;var N,k=y,A;if(l.charCodeAt(k)===Ue){for(;y++<p&&l.charCodeAt(y)!==Ue||l.charCodeAt(++y)===Ue;);return(N=y)>=p?x=!0:(A=l.charCodeAt(y++))===Tt?b=!0:A===We&&(b=!0,l.charCodeAt(y)===Tt&&++y),l.slice(k+1,N-1).replace(/""/g,'"')}for(;y<p;){if((A=l.charCodeAt(N=y++))===Tt)b=!0;else if(A===We)b=!0,l.charCodeAt(y)===Tt&&++y;else if(A!==n)continue;return l.slice(k,N)}return x=!0,l.slice(k,p)}for(;(g=m())!==Xe;){for(var v=[];g!==li&&g!==Xe;)v.push(g),g=m();h&&(v=h(v,_++))==null||d.push(v)}return d}function a(l,h){return l.map(function(d){return h.map(function(p){return f(d[p])}).join(t)})}function o(l,h){return h==null&&(h=hi(l)),[h.map(f).join(t)].concat(a(l,h)).join(`
`)}function s(l,h){return h==null&&(h=hi(l)),a(l,h).join(`
`)}function c(l){return l.map(u).join(`
`)}function u(l){return l.map(f).join(t)}function f(l){return l==null?"":l instanceof Date?vu(l):e.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l}return{parse:i,parseRows:r,format:o,formatBody:s,formatRows:c,formatRow:u,formatValue:f}}var bu=xu(","),wu=bu.parse;function $u(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function Mu(t,e){return fetch(t,e).then($u)}function Nu(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),Mu(e,n).then(function(r){return t(r,i)})}}var ku=Nu(wu);function Au(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ge(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Nt(t){return t=ge(Math.abs(t)),t?t[1]:NaN}function Su(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),a.push(n.substring(r-=s,r+s)),!((c+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Cu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Eu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function _e(t){if(!(e=Eu.exec(t)))throw new Error("invalid format: "+t);var e;return new kn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}_e.prototype=kn.prototype;function kn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}kn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tu(t){t:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Nr;function Pu(t,e){var n=ge(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(Nr=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+ge(t,Math.max(0,e+a-1))[0]}function di(t,e){var n=ge(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const pi={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Au,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>di(t*100,e),r:di,s:Pu,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function yi(t){return t}var gi=Array.prototype.map,_i=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ru(t){var e=t.grouping===void 0||t.thousands===void 0?yi:Su(gi.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?yi:Cu(gi.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",c=t.nan===void 0?"NaN":t.nan+"";function u(l){l=_e(l);var h=l.fill,d=l.align,p=l.sign,y=l.symbol,_=l.zero,g=l.width,x=l.comma,b=l.precision,m=l.trim,v=l.type;v==="n"?(x=!0,v="g"):pi[v]||(b===void 0&&(b=12),m=!0,v="g"),(_||h==="0"&&d==="=")&&(_=!0,h="0",d="=");var N=y==="$"?n:y==="#"&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",k=y==="$"?i:/[%p]/.test(v)?o:"",A=pi[v],E=/[defgprs%]/.test(v);b=b===void 0?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function C(M){var w=N,$=k,T,D,F;if(v==="c")$=A(M)+$,M="";else{M=+M;var R=M<0||1/M<0;if(M=isNaN(M)?c:A(Math.abs(M),b),m&&(M=Tu(M)),R&&+M==0&&p!=="+"&&(R=!1),w=(R?p==="("?p:s:p==="-"||p==="("?"":p)+w,$=(v==="s"?_i[8+Nr/3]:"")+$+(R&&p==="("?")":""),E){for(T=-1,D=M.length;++T<D;)if(F=M.charCodeAt(T),48>F||F>57){$=(F===46?r+M.slice(T+1):M.slice(T))+$,M=M.slice(0,T);break}}}x&&!_&&(M=e(M,1/0));var G=w.length+M.length+$.length,O=G<g?new Array(g-G+1).join(h):"";switch(x&&_&&(M=e(O+M,O.length?g-$.length:1/0),O=""),d){case"<":M=w+M+$+O;break;case"=":M=w+O+M+$;break;case"^":M=O.slice(0,G=O.length>>1)+w+M+$+O.slice(G);break;default:M=O+w+M+$;break}return a(M)}return C.toString=function(){return l+""},C}function f(l,h){var d=u((l=_e(l),l.type="f",l)),p=Math.max(-8,Math.min(8,Math.floor(Nt(h)/3)))*3,y=Math.pow(10,-p),_=_i[8+p/3];return function(g){return d(y*g)+_}}return{format:u,formatPrefix:f}}var Kt,kr,Ar;Ou({thousands:",",grouping:[3],currency:["$",""]});function Ou(t){return Kt=Ru(t),kr=Kt.format,Ar=Kt.formatPrefix,Kt}function Iu(t){return Math.max(0,-Nt(Math.abs(t)))}function Du(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Nt(e)/3)))*3-Nt(Math.abs(t)))}function Fu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nt(e)-Nt(t))+1}function An(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const mi=Symbol("implicit");function Sr(){var t=new Un,e=[],n=[],i=mi;function r(a){let o=t.get(a);if(o===void 0){if(i!==mi)return i;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new Un;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return Sr(e,n).unknown(i)},An.apply(r,arguments),r}function Cr(){var t=Sr().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,a,o,s=!1,c=0,u=0,f=.5;delete t.unknown;function l(){var h=e().length,d=r<i,p=d?r:i,y=d?i:r;a=(y-p)/Math.max(1,h-c+u*2),s&&(a=Math.floor(a)),p+=(y-p-a*(h-c))*f,o=a*(1-c),s&&(p=Math.round(p),o=Math.round(o));var _=Ba(h).map(function(g){return p+a*g});return n(d?_.reverse():_)}return t.domain=function(h){return arguments.length?(e(h),l()):e()},t.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,l()):[i,r]},t.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,s=!0,l()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(h){return arguments.length?(s=!!h,l()):s},t.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),l()):c},t.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),l()):c},t.paddingOuter=function(h){return arguments.length?(u=+h,l()):u},t.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),l()):f},t.copy=function(){return Cr(e(),[i,r]).round(s).paddingInner(c).paddingOuter(u).align(f)},An.apply(l(),arguments)}function Er(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Er(e())},t}function Lu(){return Er(Cr.apply(null,arguments).paddingInner(1))}function Hu(t){return function(){return t}}function qu(t){return+t}var vi=[0,1];function vt(t){return t}function fn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Hu(isNaN(e)?NaN:.5)}function Bu(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function zu(t,e,n){var i=t[0],r=t[1],a=e[0],o=e[1];return r<i?(i=fn(r,i),a=n(o,a)):(i=fn(i,r),a=n(a,o)),function(s){return a(i(s))}}function ju(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),a=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=fn(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var c=Ta(t,s,1,i)-1;return a[c](r[c](s))}}function Vu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Xu(){var t=vi,e=vi,n=wn,i,r,a,o=vt,s,c,u;function f(){var h=Math.min(t.length,e.length);return o!==vt&&(o=Bu(t[0],t[h-1])),s=h>2?ju:zu,c=u=null,l}function l(h){return h==null||isNaN(h=+h)?a:(c||(c=s(t.map(i),e,n)))(i(o(h)))}return l.invert=function(h){return o(r((u||(u=s(e,t.map(i),U)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,qu),f()):t.slice()},l.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},l.rangeRound=function(h){return e=Array.from(h),n=tc,f()},l.clamp=function(h){return arguments.length?(o=h?!0:vt,f()):o!==vt},l.interpolate=function(h){return arguments.length?(n=h,f()):n},l.unknown=function(h){return arguments.length?(a=h,l):a},function(h,d){return i=h,r=d,f()}}function Uu(){return Xu()(vt,vt)}function Wu(t,e,n,i){var r=Ha(t,e,n),a;switch(i=_e(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(a=Du(r,o))&&(i.precision=a),Ar(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=Fu(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Iu(r))&&(i.precision=a-(i.type==="%")*2);break}}return kr(i)}function Yu(t){var e=t.domain;return t.ticks=function(n){var i=e();return La(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return Wu(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,a=i.length-1,o=i[r],s=i[a],c,u,f=10;for(s<o&&(u=o,o=s,s=u,u=r,r=a,a=u);f-- >0;){if(u=tn(o,s,n),u===c)return i[r]=o,i[a]=s,e(i);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;c=u}return t},t}function Tr(){var t=Uu();return t.copy=function(){return Vu(t,Tr())},An.apply(t,arguments),Yu(t)}function Ft(t,e,n){this.k=t,this.x=e,this.y=n}Ft.prototype={constructor:Ft,scale:function(t){return t===1?this:new Ft(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Ft(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Ft.prototype;var ln="http://www.w3.org/1999/xhtml";const xi={svg:"http://www.w3.org/2000/svg",xhtml:ln,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pr(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),xi.hasOwnProperty(e)?{space:xi[e],local:t}:t}function Gu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ln&&e.documentElement.namespaceURI===ln?e.createElement(t):e.createElementNS(n,t)}}function Zu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Rr(t){var e=Pr(t);return(e.local?Zu:Gu)(e)}function Ku(){}function Or(t){return t==null?Ku:function(){return this.querySelector(t)}}function Ju(t){typeof t!="function"&&(t=Or(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new X(i,this._parents)}function Qu(){return[]}function tf(t){return t==null?Qu:function(){return this.querySelectorAll(t)}}function ef(t){typeof t!="function"&&(t=tf(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(i.push(t.call(c,c.__data__,u,o)),r.push(c));return new X(i,r)}function nf(t){return function(){return this.matches(t)}}function rf(t){typeof t!="function"&&(t=nf(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new X(i,this._parents)}function Ir(t){return new Array(t.length)}function af(){return new X(this._enter||this._groups.map(Ir),this._parents)}function me(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}me.prototype={constructor:me,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function of(t){return function(){return t}}var bi="$";function sf(t,e,n,i,r,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):n[o]=new me(t,a[o]);for(;o<c;++o)(s=e[o])&&(r[o]=s)}function cf(t,e,n,i,r,a,o){var s,c,u={},f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=bi+o.call(c,c.__data__,s,e),d in u?r[s]=c:u[d]=c);for(s=0;s<l;++s)d=bi+o.call(t,a[s],s,a),(c=u[d])?(i[s]=c,c.__data__=a[s],u[d]=null):n[s]=new me(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u[h[s]]===c&&(r[s]=c)}function uf(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(N){d[++u]=N}),d;var n=e?cf:sf,i=this._parents,r=this._groups;typeof t!="function"&&(t=of(t));for(var a=r.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=i[u],l=r[u],h=l.length,d=t.call(f,f&&f.__data__,u,i),p=d.length,y=s[u]=new Array(p),_=o[u]=new Array(p),g=c[u]=new Array(h);n(f,l,y,_,g,d,e);for(var x=0,b=0,m,v;x<p;++x)if(m=y[x]){for(x>=b&&(b=x+1);!(v=_[b])&&++b<p;);m._next=v||null}}return o=new X(o,i),o._enter=s,o._exit=c,o}function ff(){return new X(this._exit||this._groups.map(Ir),this._parents)}function lf(t,e,n){var i=this.enter(),r=this,a=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(r=e(r)),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function hf(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<i;++s)o[s]=e[s];return new X(o,this._parents)}function df(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function pf(t){t||(t=yf);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,c=r[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new X(r,this._parents).order()}function yf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function gf(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function _f(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function mf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function vf(){var t=0;return this.each(function(){++t}),t}function xf(){return!this.node()}function bf(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function wf(t){return function(){this.removeAttribute(t)}}function $f(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Mf(t,e){return function(){this.setAttribute(t,e)}}function Nf(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function kf(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Af(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Sf(t,e){var n=Pr(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?$f:wf:typeof e=="function"?n.local?Af:kf:n.local?Nf:Mf)(n,e))}function Dr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Cf(t){return function(){this.style.removeProperty(t)}}function Ef(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Tf(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function Pf(t,e,n){return arguments.length>1?this.each((e==null?Cf:typeof e=="function"?Tf:Ef)(t,e,n??"")):Rf(this.node(),t)}function Rf(t,e){return t.style.getPropertyValue(e)||Dr(t).getComputedStyle(t,null).getPropertyValue(e)}function Of(t){return function(){delete this[t]}}function If(t,e){return function(){this[t]=e}}function Df(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ff(t,e){return arguments.length>1?this.each((e==null?Of:typeof e=="function"?Df:If)(t,e)):this.node()[t]}function Fr(t){return t.trim().split(/^|\s+/)}function Sn(t){return t.classList||new Lr(t)}function Lr(t){this._node=t,this._names=Fr(t.getAttribute("class")||"")}Lr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Hr(t,e){for(var n=Sn(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function qr(t,e){for(var n=Sn(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function Lf(t){return function(){Hr(this,t)}}function Hf(t){return function(){qr(this,t)}}function qf(t,e){return function(){(e.apply(this,arguments)?Hr:qr)(this,t)}}function Bf(t,e){var n=Fr(t+"");if(arguments.length<2){for(var i=Sn(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?qf:e?Lf:Hf)(n,e))}function zf(){this.textContent=""}function jf(t){return function(){this.textContent=t}}function Vf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Xf(t){return arguments.length?this.each(t==null?zf:(typeof t=="function"?Vf:jf)(t)):this.node().textContent}function Uf(){this.innerHTML=""}function Wf(t){return function(){this.innerHTML=t}}function Yf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Gf(t){return arguments.length?this.each(t==null?Uf:(typeof t=="function"?Yf:Wf)(t)):this.node().innerHTML}function Zf(){this.nextSibling&&this.parentNode.appendChild(this)}function Kf(){return this.each(Zf)}function Jf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qf(){return this.each(Jf)}function tl(t){var e=typeof t=="function"?t:Rr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function el(){return null}function nl(t,e){var n=typeof t=="function"?t:Rr(t),i=e==null?el:typeof e=="function"?e:Or(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function il(){var t=this.parentNode;t&&t.removeChild(this)}function rl(){return this.each(il)}function al(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function ol(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}function sl(t){return this.select(t?ol:al)}function cl(t){return arguments.length?this.property("__data__",t):this.node().__data__}var Br={},S=null;if(typeof document<"u"){var ul=document.documentElement;"onmouseenter"in ul||(Br={mouseenter:"mouseover",mouseleave:"mouseout"})}function fl(t,e,n){return t=zr(t,e,n),function(i){var r=i.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&t.call(this,i)}}function zr(t,e,n){return function(i){var r=S;S=i;try{t.call(this,this.__data__,e,n)}finally{S=r}}}function ll(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function hl(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++i]=a;++i?e.length=i:delete this.__on}}}function dl(t,e,n){var i=Br.hasOwnProperty(t.type)?fl:zr;return function(r,a,o){var s=this.__on,c,u=i(e,a,o);if(s){for(var f=0,l=s.length;f<l;++f)if((c=s[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),c.value=e;return}}this.addEventListener(t.type,u,n),c={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(c):this.__on=[c]}}function pl(t,e,n){var i=ll(t+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(r=0,f=s[c];r<a;++r)if((o=i[r]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?dl:hl,n==null&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}function wi(t,e,n,i){var r=S;t.sourceEvent=S,S=t;try{return e.apply(n,i)}finally{S=r}}function jr(t,e,n){var i=Dr(t),r=i.CustomEvent;typeof r=="function"?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function yl(t,e){return function(){return jr(this,t,e)}}function gl(t,e){return function(){return jr(this,t,e.apply(this,arguments))}}function _l(t,e){return this.each((typeof e=="function"?gl:yl)(t,e))}var ml=[null];function X(t,e){this._groups=t,this._parents=e}X.prototype={constructor:X,select:Ju,selectAll:ef,filter:rf,data:uf,enter:af,exit:ff,join:lf,merge:hf,order:df,sort:pf,call:gf,nodes:_f,node:mf,size:vf,empty:xf,each:bf,attr:Sf,style:Pf,property:Ff,classed:Bf,text:Xf,html:Gf,raise:Kf,lower:Qf,append:tl,insert:nl,remove:rl,clone:sl,datum:cl,on:pl,dispatch:_l};function ct(t){return typeof t=="string"?new X([[document.querySelector(t)]],[document.documentElement]):new X([[t]],ml)}var vl=0;function $i(){this._="@"+(++vl).toString(36)}$i.prototype={constructor:$i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function Vr(){for(var t=S,e;e=t.sourceEvent;)t=e;return t}function Xr(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}function xl(t){var e=Vr();return e.changedTouches&&(e=e.changedTouches[0]),Xr(t,e)}function bl(t,e,n){arguments.length<3&&(n=e,e=Vr().changedTouches);for(var i=0,r=e?e.length:0,a;i<r;++i)if((a=e[i]).identifier===n)return Xr(t,a);return null}var wl={value:function(){}};function Cn(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n)throw new Error("illegal type: "+i);n[i]=[]}return new oe(n)}function oe(t){this._=t}function $l(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}oe.prototype=Cn.prototype={constructor:oe,on:function(t,e){var n=this._,i=$l(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=Ml(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=Mi(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Mi(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oe(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Ml(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Mi(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=wl,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}function Ye(){S.stopImmediatePropagation()}function bt(){S.preventDefault(),S.stopImmediatePropagation()}function Nl(t){var e=t.document.documentElement,n=ct(t).on("dragstart.drag",bt,!0);"onselectstart"in e?n.on("selectstart.drag",bt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function kl(t,e){var n=t.document.documentElement,i=ct(t).on("dragstart.drag",null);e&&(i.on("click.drag",bt,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Jt(t){return function(){return t}}function hn(t,e,n,i,r,a,o,s,c,u){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=r,this.x=a,this.y=o,this.dx=s,this.dy=c,this._=u}hn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Al(){return!S.button}function Sl(){return this.parentNode}function Cl(t){return t??{x:S.x,y:S.y}}function El(){return"ontouchstart"in this}function Ur(){var t=Al,e=Sl,n=Cl,i=El,r={},a=Cn("start","drag","end"),o=0,s,c,u,f,l=0;function h(m){m.on("mousedown.drag",d).filter(i).on("touchstart.drag",_).on("touchmove.drag",g).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!(f||!t.apply(this,arguments))){var m=b("mouse",e.apply(this,arguments),xl,this,arguments);m&&(ct(S.view).on("mousemove.drag",p,!0).on("mouseup.drag",y,!0),Nl(S.view),Ye(),u=!1,s=S.clientX,c=S.clientY,m("start"))}}function p(){if(bt(),!u){var m=S.clientX-s,v=S.clientY-c;u=m*m+v*v>l}r.mouse("drag")}function y(){ct(S.view).on("mousemove.drag mouseup.drag",null),kl(S.view,u),bt(),r.mouse("end")}function _(){if(t.apply(this,arguments)){var m=S.changedTouches,v=e.apply(this,arguments),N=m.length,k,A;for(k=0;k<N;++k)(A=b(m[k].identifier,v,bl,this,arguments))&&(Ye(),A("start"))}}function g(){var m=S.changedTouches,v=m.length,N,k;for(N=0;N<v;++N)(k=r[m[N].identifier])&&(bt(),k("drag"))}function x(){var m=S.changedTouches,v=m.length,N,k;for(f&&clearTimeout(f),f=setTimeout(function(){f=null},500),N=0;N<v;++N)(k=r[m[N].identifier])&&(Ye(),k("end"))}function b(m,v,N,k,A){var E=N(v,m),C,M,w,$=a.copy();if(wi(new hn(h,"beforestart",C,m,o,E[0],E[1],0,0,$),function(){return(S.subject=C=n.apply(k,A))==null?!1:(M=C.x-E[0]||0,w=C.y-E[1]||0,!0)}))return function T(D){var F=E,R;switch(D){case"start":r[m]=T,R=o++;break;case"end":delete r[m],--o;case"drag":E=N(v,m),R=o;break}wi(new hn(h,D,C,m,R,E[0]+M,E[1]+w,E[0]-F[0],E[1]-F[1],$),$.apply,$,[D,k,A])}}return h.filter=function(m){return arguments.length?(t=typeof m=="function"?m:Jt(!!m),h):t},h.container=function(m){return arguments.length?(e=typeof m=="function"?m:Jt(m),h):e},h.subject=function(m){return arguments.length?(n=typeof m=="function"?m:Jt(m),h):n},h.touchable=function(m){return arguments.length?(i=typeof m=="function"?m:Jt(!!m),h):i},h.on=function(){var m=a.on.apply(a,arguments);return m===a?h:m},h.clickDistance=function(m){return arguments.length?(l=(m=+m)*m,h):Math.sqrt(l)},h}var dn=Math.PI,pn=2*dn,ht=1e-6,Tl=pn-ht;function yn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function En(){return new yn}yn.prototype=En.prototype={constructor:yn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+a)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var a=this._x1,o=this._y1,s=n-t,c=i-e,u=a-t,f=o-e,l=u*u+f*f;if(r<0)throw new Error("negative radius: "+r);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>ht)if(!(Math.abs(f*s-c*u)>ht)||!r)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var h=n-a,d=i-o,p=s*s+c*c,y=h*h+d*d,_=Math.sqrt(p),g=Math.sqrt(l),x=r*Math.tan((dn-Math.acos((p+l-y)/(2*_*g)))/2),b=x/g,m=x/_;Math.abs(b-1)>ht&&(this._+="L"+(t+b*u)+","+(e+b*f)),this._+="A"+r+","+r+",0,0,"+ +(f*h>u*d)+","+(this._x1=t+m*s)+","+(this._y1=e+m*c)}},arc:function(t,e,n,i,r,a){t=+t,e=+e,n=+n,a=!!a;var o=n*Math.cos(i),s=n*Math.sin(i),c=t+o,u=e+s,f=1^a,l=a?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>ht||Math.abs(this._y1-u)>ht)&&(this._+="L"+c+","+u),n&&(l<0&&(l=l%pn+pn),l>Tl?this._+="A"+n+","+n+",0,1,"+f+","+(t-o)+","+(e-s)+"A"+n+","+n+",0,1,"+f+","+(this._x1=c)+","+(this._y1=u):l>ht&&(this._+="A"+n+","+n+",0,"+ +(l>=dn)+","+f+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function j(t){return function(){return t}}var P=1e-12,ve=Math.PI,xe=ve/2,Pl=2*ve;function Rl(t){return t.innerRadius}function Ol(t){return t.outerRadius}function Il(t){return t.startAngle}function Dl(t){return t.endAngle}function Fl(t){return t&&t.padAngle}function Ni(t){return t>=1?xe:t<=-1?-xe:Math.asin(t)}function Ll(t,e,n,i,r,a,o,s){var c=n-t,u=i-e,f=o-r,l=s-a,h=(f*(e-a)-l*(t-r))/(l*c-f*u);return[t+h*c,e+h*u]}function Qt(t,e,n,i,r,a,o){var s=t-n,c=e-i,u=(o?a:-a)/Math.sqrt(s*s+c*c),f=u*c,l=-u*s,h=t+f,d=e+l,p=n+f,y=i+l,_=(h+p)/2,g=(d+y)/2,x=p-h,b=y-d,m=x*x+b*b,v=r-a,N=h*y-p*d,k=(b<0?-1:1)*Math.sqrt(Math.max(0,v*v*m-N*N)),A=(N*b-x*k)/m,E=(-N*x-b*k)/m,C=(N*b+x*k)/m,M=(-N*x+b*k)/m,w=A-_,$=E-g,T=C-_,D=M-g;return w*w+$*$>T*T+D*D&&(A=C,E=M),{cx:A,cy:E,x01:-f,y01:-l,x11:A*(r/v-1),y11:E*(r/v-1)}}function Hl(){var t=Rl,e=Ol,n=j(0),i=null,r=Il,a=Dl,o=Fl,s=null;function c(){var u,f,l=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-xe,p=a.apply(this,arguments)-xe,y=Math.abs(p-d),_=p>d;if(s||(s=u=En()),h<l&&(f=h,h=l,l=f),!(h>P))s.moveTo(0,0);else if(y>Pl-P)s.moveTo(h*Math.cos(d),h*Math.sin(d)),s.arc(0,0,h,d,p,!_),l>P&&(s.moveTo(l*Math.cos(p),l*Math.sin(p)),s.arc(0,0,l,p,d,_));else{var g=d,x=p,b=d,m=p,v=y,N=y,k=o.apply(this,arguments)/2,A=k>P&&(i?+i.apply(this,arguments):Math.sqrt(l*l+h*h)),E=Math.min(Math.abs(h-l)/2,+n.apply(this,arguments)),C=E,M=E,w,$;if(A>P){var T=Ni(A/l*Math.sin(k)),D=Ni(A/h*Math.sin(k));(v-=T*2)>P?(T*=_?1:-1,b+=T,m-=T):(v=0,b=m=(d+p)/2),(N-=D*2)>P?(D*=_?1:-1,g+=D,x-=D):(N=0,g=x=(d+p)/2)}var F=h*Math.cos(g),R=h*Math.sin(g),G=l*Math.cos(m),O=l*Math.sin(m);if(E>P){var Ut=h*Math.cos(x),Wt=h*Math.sin(x),Ie=l*Math.cos(b),De=l*Math.sin(b);if(y<ve){var st=v>P?Ll(F,R,Ie,De,Ut,Wt,G,O):[G,O],Fe=F-st[0],Le=R-st[1],He=Ut-st[0],qe=Wt-st[1],Vn=1/Math.sin(Math.acos((Fe*He+Le*qe)/(Math.sqrt(Fe*Fe+Le*Le)*Math.sqrt(He*He+qe*qe)))/2),Xn=Math.sqrt(st[0]*st[0]+st[1]*st[1]);C=Math.min(E,(l-Xn)/(Vn-1)),M=Math.min(E,(h-Xn)/(Vn+1))}}N>P?M>P?(w=Qt(Ie,De,F,R,h,M,_),$=Qt(Ut,Wt,G,O,h,M,_),s.moveTo(w.cx+w.x01,w.cy+w.y01),M<E?s.arc(w.cx,w.cy,M,Math.atan2(w.y01,w.x01),Math.atan2($.y01,$.x01),!_):(s.arc(w.cx,w.cy,M,Math.atan2(w.y01,w.x01),Math.atan2(w.y11,w.x11),!_),s.arc(0,0,h,Math.atan2(w.cy+w.y11,w.cx+w.x11),Math.atan2($.cy+$.y11,$.cx+$.x11),!_),s.arc($.cx,$.cy,M,Math.atan2($.y11,$.x11),Math.atan2($.y01,$.x01),!_))):(s.moveTo(F,R),s.arc(0,0,h,g,x,!_)):s.moveTo(F,R),!(l>P)||!(v>P)?s.lineTo(G,O):C>P?(w=Qt(G,O,Ut,Wt,l,-C,_),$=Qt(F,R,Ie,De,l,-C,_),s.lineTo(w.cx+w.x01,w.cy+w.y01),C<E?s.arc(w.cx,w.cy,C,Math.atan2(w.y01,w.x01),Math.atan2($.y01,$.x01),!_):(s.arc(w.cx,w.cy,C,Math.atan2(w.y01,w.x01),Math.atan2(w.y11,w.x11),!_),s.arc(0,0,l,Math.atan2(w.cy+w.y11,w.cx+w.x11),Math.atan2($.cy+$.y11,$.cx+$.x11),_),s.arc($.cx,$.cy,C,Math.atan2($.y11,$.x11),Math.atan2($.y01,$.x01),!_))):s.arc(0,0,l,m,b,_)}if(s.closePath(),u)return s=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,f=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-ve/2;return[Math.cos(f)*u,Math.sin(f)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:j(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:j(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:j(+u),c):n},c.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:j(+u),c):i},c.startAngle=function(u){return arguments.length?(r=typeof u=="function"?u:j(+u),c):r},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:j(+u),c):a},c.padAngle=function(u){return arguments.length?(o=typeof u=="function"?u:j(+u),c):o},c.context=function(u){return arguments.length?(s=u??null,c):s},c}function Wr(t){this._context=t}Wr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Yr(t){return new Wr(t)}function ql(t){return t[0]}function Bl(t){return t[1]}function zl(){var t=ql,e=Bl,n=j(!0),i=null,r=Yr,a=null;function o(s){var c,u=s.length,f,l=!1,h;for(i==null&&(a=r(h=En())),c=0;c<=u;++c)!(c<u&&n(f=s[c],c,s))===l&&((l=!l)?a.lineStart():a.lineEnd()),l&&a.point(+t(f,c,s),+e(f,c,s));if(h)return a=null,h+""||null}return o.x=function(s){return arguments.length?(t=typeof s=="function"?s:j(+s),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:j(+s),o):e},o.defined=function(s){return arguments.length?(n=typeof s=="function"?s:j(!!s),o):n},o.curve=function(s){return arguments.length?(r=s,i!=null&&(a=r(i)),o):r},o.context=function(s){return arguments.length?(s==null?i=a=null:a=r(i=s),o):i},o}function be(){}function ki(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Tn(t){this._context=t}Tn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ki(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ki(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Gr(t,e){this._basis=new Tn(t),this._beta=e}Gr.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],r=e[0],a=t[n]-i,o=e[n]-r,s=-1,c;++s<=n;)c=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+c*a),this._beta*e[s]+(1-this._beta)*(r+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};(function t(e){function n(i){return e===1?new Tn(i):new Gr(i,e)}return n.beta=function(i){return t(+i)},n})(.85);function we(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Pn(t,e){this._context=t,this._k=(1-e)/6}Pn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:we(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:we(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return new Pn(i,e)}return n.tension=function(i){return t(+i)},n})(0);function Rn(t,e){this._context=t,this._k=(1-e)/6}Rn.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:we(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return new Rn(i,e)}return n.tension=function(i){return t(+i)},n})(0);function On(t,e){this._context=t,this._k=(1-e)/6}On.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:we(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return new On(i,e)}return n.tension=function(i){return t(+i)},n})(0);function In(t,e,n){var i=t._x1,r=t._y1,a=t._x2,o=t._y2;if(t._l01_a>P){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>P){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,f=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*u+t._x1*t._l23_2a-e*t._l12_2a)/f,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/f}t._context.bezierCurveTo(i,r,a,o,t._x2,t._y2)}function Zr(t,e){this._context=t,this._alpha=e}Zr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:In(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const jl=function t(e){function n(i){return e?new Zr(i,e):new Pn(i,0)}return n.alpha=function(i){return t(+i)},n}(.5);function Kr(t,e){this._context=t,this._alpha=e}Kr.prototype={areaStart:be,areaEnd:be,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:In(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return e?new Kr(i,e):new Rn(i,0)}return n.alpha=function(i){return t(+i)},n})(.5);function Jr(t,e){this._context=t,this._alpha=e}Jr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:In(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};(function t(e){function n(i){return e?new Jr(i,e):new On(i,0)}return n.alpha=function(i){return t(+i)},n})(.5);function Ai(t){return t<0?-1:1}function Si(t,e,n){var i=t._x1-t._x0,r=e-t._x1,a=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),s=(a*r+o*i)/(i+r);return(Ai(a)+Ai(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Ci(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ge(t,e,n){var i=t._x0,r=t._y0,a=t._x1,o=t._y1,s=(a-i)/3;t._context.bezierCurveTo(i+s,r+s*e,a-s,o-s*n,a,o)}function gn(t){this._context=t}gn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ge(this,this._t0,Ci(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ge(this,Ci(this,n=Si(this,t,e)),n);break;default:Ge(this,this._t0,n=Si(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};Object.create(gn.prototype).point=function(t,e){gn.prototype.point.call(this,e,t)};var Vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},St=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},at=function t(e,n,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(r===void 0){var a=Object.getPrototypeOf(e);return a===null?void 0:t(a,n,i)}else{if("value"in r)return r.value;var o=r.get;return o===void 0?void 0:o.call(i)}},Dn=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Fn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},Xl=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}else return Array.from(t)},Ul=function(){function t(e){var n=e.x,i=n===void 0?0:n,r=e.y,a=r===void 0?0:r,o=e.nx,s=e.ny,c=e.dy,u=c===void 0?0:c,f=e.dx,l=f===void 0?0:f,h=e.color,d=h===void 0?"grey":h,p=e.data,y=e.type,_=e.subject,g=e.connector,x=e.note,b=e.disable,m=e.id,v=e.className;At(this,t),this._dx=o!==void 0?o-i:l,this._dy=s!==void 0?s-a:u,this._x=i,this._y=a,this._color=d,this.id=m,this._className=v||"",this._type=y||"",this.data=p,this.note=x||{},this.connector=g||{},this.subject=_||{},this.disable=b||[]}return St(t,[{key:"updatePosition",value:function(){this.type.setPosition&&(this.type.setPosition(),this.type.subject&&this.type.subject.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawSubject())}},{key:"clearComponents",value:function(){this.type.clearComponents&&this.type.clearComponents()}},{key:"updateOffset",value:function(){this.type.setOffset&&(this.type.setOffset(),this.type.connector.selectAll(":not(.handle)").nodes().length!==0&&this.type.redrawConnector(),this.type.redrawNote())}},{key:"className",get:function(){return this._className},set:function(n){this._className=n,this.type.setClassName&&this.type.setClassName()}},{key:"type",get:function(){return this._type},set:function(n){this._type=n,this.clearComponents()}},{key:"x",get:function(){return this._x},set:function(n){this._x=n,this.updatePosition()}},{key:"y",get:function(){return this._y},set:function(n){this._y=n,this.updatePosition()}},{key:"color",get:function(){return this._color},set:function(n){this._color=n,this.updatePosition()}},{key:"dx",get:function(){return this._dx},set:function(n){this._dx=n,this.updateOffset()}},{key:"dy",get:function(){return this._dy},set:function(n){this._dy=n,this.updateOffset()}},{key:"nx",set:function(n){this._dx=n-this._x,this.updateOffset()}},{key:"ny",set:function(n){this._dy=n-this._y,this.updateOffset()}},{key:"offset",get:function(){return{x:this._dx,y:this._dy}},set:function(n){var i=n.x,r=n.y;this._dx=i,this._dy=r,this.updateOffset()}},{key:"position",get:function(){return{x:this._x,y:this._y}},set:function(n){var i=n.x,r=n.y;this._x=i,this._y=r,this.updatePosition()}},{key:"translation",get:function(){return{x:this._x+this._dx,y:this._y+this._dy}}},{key:"json",get:function(){var n={x:this._x,y:this._y,dx:this._dx,dy:this._dy};return this.data&&Object.keys(this.data).length>0&&(n.data=this.data),this.type&&(n.type=this.type),this._className&&(n.className=this._className),Object.keys(this.connector).length>0&&(n.connector=this.connector),Object.keys(this.subject).length>0&&(n.subject=this.subject),Object.keys(this.note).length>0&&(n.note=this.note),n}}]),t}(),Wl=function(){function t(e){var n=e.annotations,i=e.accessors,r=e.accessorsInverse;At(this,t),this.accessors=i,this.accessorsInverse=r,this.annotations=n}return St(t,[{key:"clearTypes",value:function(n){this.annotations.forEach(function(i){i.type=void 0,i.subject=n&&n.subject||i.subject,i.connector=n&&n.connector||i.connector,i.note=n&&n.note||i.note})}},{key:"setPositionWithAccessors",value:function(){var n=this;this.annotations.forEach(function(i){i.type.setPositionWithAccessors(n.accessors)})}},{key:"editMode",value:function(n){this.annotations.forEach(function(i){i.type&&(i.type.editMode=n,i.type.updateEditMode())})}},{key:"updateDisable",value:function(n){this.annotations.forEach(function(i){i.disable=n,i.type&&n.forEach(function(r){i.type[r]&&(i.type[r].remove&&i.type[r].remove(),i.type[r]=void 0)})})}},{key:"updateTextWrap",value:function(n){this.annotations.forEach(function(i){i.type&&i.type.updateTextWrap&&i.type.updateTextWrap(n)})}},{key:"updateText",value:function(){this.annotations.forEach(function(n){n.type&&n.type.drawText&&n.type.drawText()})}},{key:"updateNotePadding",value:function(n){this.annotations.forEach(function(i){i.type&&(i.type.notePadding=n)})}},{key:"json",get:function(){var n=this;return this.annotations.map(function(i){var r=i.json;return n.accessorsInverse&&i.data&&(r.data={},Object.keys(n.accessorsInverse).forEach(function(a){r.data[a]=n.accessorsInverse[a]({x:i.x,y:i.y})})),r})}},{key:"noteNodes",get:function(){return this.annotations.map(function(n){return H({},n.type.getNoteBBoxOffset(),{positionX:n.x,positionY:n.y})})}}]),t}(),Yl=function(e){var n=e.cx,i=n===void 0?0:n,r=e.cy,a=r===void 0?0:r;return{move:{x:i,y:a}}},Gl=function(e){var n=e.cx,i=n===void 0?0:n,r=e.cy,a=r===void 0?0:r,o=e.r1,s=e.r2,c=e.padding,u={move:{x:i,y:a}};return o!==void 0&&(u.r1={x:i+o/Math.sqrt(2),y:a+o/Math.sqrt(2)}),s!==void 0&&(u.r2={x:i+s/Math.sqrt(2),y:a+s/Math.sqrt(2)}),c!==void 0&&(u.padding={x:i+o+c,y:a}),u},Zl=function(e){var n=e.group,i=e.handles,r=e.r,a=r===void 0?10:r,o=n.selectAll("circle.handle").data(i);o.enter().append("circle").attr("class","handle").attr("fill","grey").attr("fill-opacity",.1).attr("cursor","move").attr("stroke-dasharray",5).attr("stroke","grey").call(Ur().container(ct("g.annotations").node()).on("start",function(s){return s.start&&s.start(s)}).on("drag",function(s){return s.drag&&s.drag(s)}).on("end",function(s){return s.end&&s.end(s)})),n.selectAll("circle.handle").attr("cx",function(s){return s.x}).attr("cy",function(s){return s.y}).attr("r",function(s){return s.r||a}).attr("class",function(s){return"handle "+(s.className||"")}),o.exit().remove()},Qr=function(e,n){return(e==="dynamic"||e==="left"||e==="right")&&(n<0?e="top":e="bottom"),e},ta=function(e,n){return(e==="dynamic"||e==="top"||e==="bottom")&&(n<0?e="right":e="left"),e},Kl=["topBottom","top","bottom"],Jl=["leftRight","left","right"],Ql=function(t){var e=t.padding,n=e===void 0?0:e,i=t.bbox,r=i===void 0?{x:0,width:0,height:0}:i,a=t.align,o=t.orientation,s=t.offset,c=s===void 0?{x:0,y:0}:s,u=-r.x,f=0;return Kl.indexOf(o)!==-1?(a=ta(a,c.x),c.y<0&&o==="topBottom"||o==="top"?f-=r.height+n:f+=n,a==="middle"?u-=r.width/2:a==="right"&&(u-=r.width)):Jl.indexOf(o)!==-1&&(a=Qr(a,c.y),c.x<0&&o==="leftRight"||o==="left"?u-=r.width+n:u+=n,a==="middle"?f-=r.height/2:a==="top"&&(f-=r.height)),{x:u,y:f}},tt=function(e){var n=e.data,i=e.curve,r=i===void 0?Yr:i,a=e.canvasContext,o=e.className,s=e.classID,c=zl().curve(r),u={type:"path",className:o,classID:s,data:n};return a?(c.context(a),u.pathMethods=c):u.attrs={d:c(n)},u},$e=function(e){var n=e.data,i=e.canvasContext,r=e.className,a=e.classID,o={type:"path",className:r,classID:a,data:n},s=Hl().innerRadius(n.innerRadius||0).outerRadius(n.outerRadius||n.radius||2).startAngle(n.startAngle||0).endAngle(n.endAngle||2*Math.PI);return i?(s.context(i),o.pathMethods=lineGen):o.attrs={d:s()},o},th=function(t){var e=t.align,n=t.x,i=n===void 0?0:n,r=t.y,a=r===void 0?0:r,o=t.bbox,s=t.offset;e=Qr(e,s.y),e==="top"?a-=o.height:e==="middle"&&(a-=o.height/2);var c=[[i,a],[i,a+o.height]];return{components:[tt({data:c,className:"note-line"})]}},eh=function(t){var e=t.align,n=t.x,i=n===void 0?0:n,r=t.y,a=r===void 0?0:r,o=t.offset,s=t.bbox;e=ta(e,o.x),e==="right"?i-=s.width:e==="middle"&&(i-=s.width/2);var c=[[i,a],[i+s.width,a]];return{components:[tt({data:c,className:"note-line"})]}},ea=function(e){var n=e.type,i=e.subjectType,r=n.annotation,a=r.position,o=r.x-a.x,s=o+r.dx,c=r.y-a.y,u=c+r.dy,f=r.subject;if(i==="circle"&&(f.outerRadius||f.radius)){var l=Math.sqrt((o-s)*(o-s)+(c-u)*(c-u)),h=Math.asin(-u/l),d=f.outerRadius||f.radius+(f.radiusPadding||0);o=Math.abs(Math.cos(h)*d)*(s<0?-1:1),c=Math.abs(Math.sin(h)*d)*(u<0?-1:1)}if(i==="rect"){var p=f.width,y=f.height;(p>0&&r.dx>0||p<0&&r.dx<0)&&(Math.abs(p)>Math.abs(r.dx)?o=p/2:o=p),(y>0&&r.dy>0||y<0&&r.dy<0)&&(Math.abs(y)>Math.abs(r.dy)?c=y/2:c=y),o===p/2&&c===y/2&&(o=s,c=u)}return[[o,c],[s,u]]},nh=function(t){var e=ea(t);return{components:[tt({data:e,className:"connector"})]}},ih=function(t){var e=t.type,n=t.subjectType,i=e.annotation,r=i.position,a=i.x-r.x,o=a+i.dx,s=i.y-r.y,c=s+i.dy,u=i.subject;if(n==="rect"){var f=u.width,l=u.height;(f>0&&i.dx>0||f<0&&i.dx<0)&&(Math.abs(f)>Math.abs(i.dx)?a=f/2:a=f),(l>0&&i.dy>0||l<0&&i.dy<0)&&(Math.abs(l)>Math.abs(i.dy)?s=l/2:s=l),a===f/2&&s===l/2&&(a=o,s=c)}var h=[[a,s],[o,c]],d=c-s,p=o-a,y=o,_=c,g=c<s&&o>a||o<a&&c>s?-1:1;if(Math.abs(p)<Math.abs(d)?(y=o,_=s+p*g):(_=c,y=a+d*g),n==="circle"&&(u.outerRadius||u.radius)){var x=(u.outerRadius||u.radius)+(u.radiusPadding||0),b=x/Math.sqrt(2);if(Math.abs(p)>b&&Math.abs(d)>b)a=b*(o<0?-1:1),s=b*(c<0?-1:1),h=[[a,s],[y,_],[o,c]];else if(Math.abs(p)>Math.abs(d)){var m=Math.asin(-c/x);a=Math.abs(Math.cos(m)*x)*(o<0?-1:1),h=[[a,c],[o,c]]}else{var v=Math.acos(o/x);s=Math.abs(Math.sin(v)*x)*(c<0?-1:1),h=[[o,s],[o,c]]}}else h=[[a,s],[y,_],[o,c]];return{components:[tt({data:h,className:"connector"})]}},rh=function(t){var e=t.type,n=t.connectorData,i=t.subjectType;n||(n={}),(!n.points||typeof n.points=="number")&&(n.points=ah(e.annotation.offset,n.points)),n.curve||(n.curve=jl);var r=[];if(e.editMode){var a=n.points.map(function(u,f){return H({},Yl({cx:u[0],cy:u[1]}),{index:f})}),o=function(f){n.points[f][0]+=S.dx,n.points[f][1]+=S.dy,e.redrawConnector()};r=e.mapHandles(a.map(function(u){return H({},u.move,{drag:o.bind(e,u.index)})}))}var s=ea({type:e,subjectType:i});s=[s[0]].concat(Xl(n.points),[s[1]]);var c=[tt({data:s,curve:n.curve,className:"connector"})];return{components:c,handles:r}},ah=function(e){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,i={x:e.x/(n+1),y:e.y/(n+1)},r=[],a=1;a<=n;a++)r.push([i.x*a+a%2*20,i.y*a-a%2*20]);return r},oh=function(t){var e=t.annotation,n=t.start,i=t.end,r=t.scale,a=r===void 0?1:r,o=e.position;n?n=[-i[0]+n[0],-i[1]+n[1]]:n=[e.dx,e.dy],i||(i=[e.x-o.x,e.y-o.y]);var s=i[0],c=i[1],u=n[0],f=n[1],l=10*a,h=16/180*Math.PI,d=Math.atan(f/u);u<0&&(d+=Math.PI);var p=[[s,c],[Math.cos(d+h)*l+s,Math.sin(d+h)*l+c],[Math.cos(d-h)*l+s,Math.sin(d-h)*l+c],[s,c]];return{components:[tt({data:p,className:"connector-end connector-arrow",classID:"connector-end"})]}},sh=function(t){var e=t.line,n=t.scale,i=n===void 0?1:n,r=$e({className:"connector-end connector-dot",classID:"connector-end",data:{radius:3*Math.sqrt(i)}});return r.attrs.transform="translate("+e.data[0][0]+", "+e.data[0][1]+")",{components:[r]}},ch=function(t){var e=t.subjectData,n=t.type;!e.radius&&!e.outerRadius&&(e.radius=20);var i=[],r=$e({data:e,className:"subject"});if(n.editMode){var a=Gl({r1:r.data.outerRadius||r.data.radius,r2:r.data.innerRadius,padding:e.radiusPadding}),o=function(u){var f=e[u]+S.dx*Math.sqrt(2);e[u]=f,n.redrawSubject(),n.redrawConnector()},s=[H({},a.r1,{drag:o.bind(n,e.outerRadius!==void 0?"outerRadius":"radius")})];e.innerRadius&&s.push(H({},a.r2,{drag:o.bind(n,"innerRadius")})),i=n.mapHandles(s)}return r.attrs["fill-opacity"]=0,{components:[r],handles:i}},uh=function(t){var e=t.subjectData,n=t.type;e.width||(e.width=100),e.height||(e.height=100);var i=[],r=e.width,a=e.height,o=[[0,0],[r,0],[r,a],[0,a],[0,0]],s=tt({data:o,className:"subject"});if(n.editMode){var c=function(){e.width=S.x,n.redrawSubject(),n.redrawConnector()},u=function(){e.height=S.y,n.redrawSubject(),n.redrawConnector()},f=[{x:r,y:a/2,drag:c.bind(n)},{x:r/2,y:a,drag:u.bind(n)}];i=n.mapHandles(f)}return s.attrs["fill-opacity"]=.1,{components:[s],handles:i}},fh=function(t){var e=t.subjectData,n=t.type,i=n.annotation.position,r=(e.x1!==void 0?e.x1:i.x)-i.x,a=(e.x2!==void 0?e.x2:i.x)-i.x,o=(e.y1!==void 0?e.y1:i.y)-i.y,s=(e.y2!==void 0?e.y2:i.y)-i.y,c=[[r,o],[a,s]];return{components:[tt({data:c,className:"subject"})]}},lh=function(t){var e=t.subjectData,n=e===void 0?{}:e,i=t.type,r=i===void 0?{}:i,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.typeSettings&&r.typeSettings.subject;n.radius||(o&&o.radius?n.radius=o.radius:n.radius=14),n.x||o&&o.x&&(n.x=o.x),n.y||o&&o.y&&(n.y=o.y);var s=[],c=[],u=n.radius,f=u*.7,l=0,h=0,d=Math.sqrt(2)*u,p={xleftcorner:-u,xrightcorner:u,ytopcorner:-u,ybottomcorner:u,xleft:-d,xright:d,ytop:-d,ybottom:d};n.x&&!n.y?l=p["x"+n.x]:n.y&&!n.x?h=p["y"+n.y]:n.x&&n.y&&(l=p["x"+n.x+"corner"],h=p["y"+n.y+"corner"]);var y="translate("+l+", "+h+")",_=$e({className:"subject",data:{radius:u}});_.attrs.transform=y,_.attrs.fill=a.color,_.attrs["stroke-linecap"]="round",_.attrs["stroke-width"]="3px";var g=$e({className:"subject-ring",data:{outerRadius:u,innerRadius:f}});g.attrs.transform=y,g.attrs["stroke-width"]="3px",g.attrs.fill="white";var x=void 0;if(l&&h||!l&&!h)x=tt({className:"subject-pointer",data:[[0,0],[l||0,0],[0,h||0],[0,0]]});else if(l||h){var b=function(A){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return A&&A/Math.sqrt(2)/Math.sqrt(2)||E*u/Math.sqrt(2)};x=tt({className:"subject-pointer",data:[[0,0],[b(l),b(h)],[b(l,-1),b(h,-1)],[0,0]]})}if(x&&(x.attrs.fill=a.color,x.attrs["stroke-linecap"]="round",x.attrs["stroke-width"]="3px",c.push(x)),r.editMode){var m=function(){n.x=S.x<-u*2?"left":S.x>u*2?"right":void 0,n.y=S.y<-u*2?"top":S.y>u*2?"bottom":void 0,r.redrawSubject()},v={x:l*2,y:h*2,drag:m.bind(r)};!v.x&&!v.y&&(v.y=-u),s=r.mapHandles([v])}var N=void 0;return n.text&&(N={type:"text",className:"badge-text",attrs:{fill:"white",stroke:"none","font-size":".7em",text:n.text,"text-anchor":"middle",dy:".25em",x:l,y:h}}),c.push(_),c.push(g),c.push(N),{components:c,handles:s}},na=function(){function t(e){var n=e.a,i=e.annotation,r=e.editMode,a=e.dispatcher,o=e.notePadding,s=e.accessors;if(At(this,t),this.a=n,this.note=i.disable.indexOf("note")===-1&&n.select("g.annotation-note"),this.noteContent=this.note&&n.select("g.annotation-note-content"),this.connector=i.disable.indexOf("connector")===-1&&n.select("g.annotation-connector"),this.subject=i.disable.indexOf("subject")===-1&&n.select("g.annotation-subject"),this.dispatcher=a,a){var c=ph.bind(null,a,i);c({component:this.note,name:"note"}),c({component:this.connector,name:"connector"}),c({component:this.subject,name:"subject"})}this.annotation=i,this.editMode=i.editMode||r,this.notePadding=o!==void 0?o:3,this.offsetCornerX=0,this.offsetCornerY=0,s&&i.data&&this.init(s)}return St(t,[{key:"init",value:function(n){this.annotation.x||this.mapX(n),this.annotation.y||this.mapY(n)}},{key:"mapY",value:function(n){n.y&&(this.annotation.y=n.y(this.annotation.data))}},{key:"mapX",value:function(n){n.x&&(this.annotation.x=n.x(this.annotation.data))}},{key:"updateEditMode",value:function(){this.a.selectAll("circle.handle").remove()}},{key:"drawOnSVG",value:function(n,i){var r=this;Array.isArray(i)||(i=[i]),i.filter(function(a){return a}).forEach(function(a){var o=a.type,s=a.className,c=a.attrs,u=a.handles,f=a.classID;if(o==="handle")Zl({group:n,r:c&&c.r,handles:u});else{Z(n,[r.annotation],o,s,f);for(var l=n.select(o+"."+(f||s)),h=Object.keys(c),d=[],p=l.node().attributes,y=p.length-1;y>=0;y--){var _=p[y].name;h.indexOf(_)===-1&&_!=="class"&&d.push(_)}h.forEach(function(g){g==="text"?l.text(c[g]):l.attr(g,c[g])}),d.forEach(function(g){return l.attr(g,null)})}})}},{key:"getNoteBBox",value:function(){return Ti(this.note,".annotation-note-content text")}},{key:"getNoteBBoxOffset",value:function(){var n=Ti(this.note,".annotation-note-content"),i=this.noteContent.attr("transform").split(/\(|\,|\)/g);return n.offsetCornerX=parseFloat(i[1])+this.annotation.dx,n.offsetCornerY=parseFloat(i[2])+this.annotation.dy,n.offsetX=this.annotation.dx,n.offsetY=this.annotation.dy,n}},{key:"drawSubject",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.annotation.subject,a=i.type,o={type:this,subjectData:r},s={};a==="circle"?s=ch(o):a==="rect"?s=uh(o):a==="threshold"?s=fh(o):a==="badge"&&(s=lh(o,this.annotation));var c=s,u=c.components,f=u===void 0?[]:u,l=c.handles,h=l===void 0?[]:l;return f.forEach(function(d){d&&d.attrs&&!d.attrs.stroke&&(d.attrs.stroke=n.annotation.color)}),this.editMode&&(h=h.concat(this.mapHandles([{drag:this.dragSubject.bind(this)}])),f.push({type:"handle",handles:h})),f}},{key:"drawConnector",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.annotation.connector,a=r.type||i.type,o={type:this,connectorData:r};o.subjectType=this.typeSettings&&this.typeSettings.subject&&this.typeSettings.subject.type;var s={};a==="curve"?s=rh(o):a==="elbow"?s=ih(o):s=nh(o);var c=s,u=c.components,f=u===void 0?[]:u,l=c.handles,h=l===void 0?[]:l,d=f[0];d&&(d.attrs.stroke=this.annotation.color,d.attrs.fill="none");var p=r.end||i.end,y={};if(p==="arrow"){var _=d.data[1],g=d.data[0],x=Math.sqrt(Math.pow(_[0]-g[0],2)+Math.pow(_[1]-g[1],2));x<5&&d.data[2]&&(_=d.data[2]),y=oh({annotation:this.annotation,start:_,end:g,scale:r.endScale})}else p==="dot"?y=sh({line:d,scale:r.endScale}):(!p||p==="none")&&this.connector&&this.connector.select(".connector-end").remove();return y.components&&(y.components.forEach(function(b){b.attrs.fill=n.annotation.color,b.attrs.stroke=n.annotation.color}),f=f.concat(y.components)),this.editMode&&h.length!==0&&f.push({type:"handle",handles:h}),f}},{key:"drawNote",value:function(){var n=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.annotation.note,a=r.align||i.align||"dynamic",o={bbox:i.bbox,align:a,offset:this.annotation.offset},s=r.lineType||i.lineType,c={};s==="vertical"?c=th(o):s==="horizontal"&&(c=eh(o));var u=c,f=u.components,l=f===void 0?[]:f,h=u.handles,d=h===void 0?[]:h;if(l.forEach(function(g){g.attrs.stroke=n.annotation.color}),this.editMode){d=this.mapHandles([{x:0,y:0,drag:this.dragNote.bind(this)}]),l.push({type:"handle",handles:d});var p=this.dragNote.bind(this),y=this.dragstarted.bind(this),_=this.dragended.bind(this);this.note.call(Ur().container(ct("g.annotations").node()).on("start",function(g){return y(g)}).on("drag",function(g){return p(g)}).on("end",function(g){return _(g)}))}else this.note.on("mousedown.drag",null);return l}},{key:"drawNoteContent",value:function(n){var i=this.annotation.note,r=i.padding!==void 0?i.padding:this.notePadding,a=i.orientation||n.orientation||"topBottom",o=i.lineType||n.lineType,s=i.align||n.align||"dynamic";o==="vertical"?a="leftRight":o==="horizontal"&&(a="topBottom");var c={padding:r,bbox:n.bbox,offset:this.annotation.offset,orientation:a,align:s},u=Ql(c),f=u.x,l=u.y;return this.offsetCornerX=f+this.annotation.dx,this.offsetCornerY=l+this.annotation.dy,this.note&&this.noteContent.attr("transform","translate("+f+", "+l+")"),[]}},{key:"drawOnScreen",value:function(n,i){return this.drawOnSVG(n,i)}},{key:"redrawSubject",value:function(){this.subject&&this.drawOnScreen(this.subject,this.drawSubject())}},{key:"redrawConnector",value:function(){this.connector&&this.drawOnScreen(this.connector,this.drawConnector())}},{key:"redrawNote",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getNoteBBox();this.noteContent&&this.drawOnScreen(this.noteContent,this.drawNoteContent({bbox:n})),this.note&&this.drawOnScreen(this.note,this.drawNote({bbox:n}))}},{key:"setPosition",value:function(){var n=this.annotation.position;this.a.attr("transform","translate("+n.x+", "+n.y+")")}},{key:"clearComponents",value:function(){this.subject&&this.subject.select("*").remove(),this.connector&&this.connector.select("*").remove()}},{key:"setOffset",value:function(){if(this.note){var n=this.annotation.offset;this.note.attr("transform","translate("+n.x+", "+n.y+")")}}},{key:"setPositionWithAccessors",value:function(n){n&&this.annotation.data&&(this.mapX(n),this.mapY(n)),this.setPosition()}},{key:"setClassName",value:function(){this.a.attr("class","annotation "+(this.className&&this.className())+" "+(this.editMode?"editable":"")+" "+(this.annotation.className||""))}},{key:"draw",value:function(){this.setClassName(),this.setPosition(),this.setOffset(),this.redrawSubject(),this.redrawConnector(),this.redrawNote()}},{key:"dragstarted",value:function(){S.sourceEvent.stopPropagation(),this.dispatcher&&this.dispatcher.call("dragstart",this.a,this.annotation),this.a.classed("dragging",!0),this.a.selectAll("circle.handle").style("pointer-events","none")}},{key:"dragended",value:function(){this.dispatcher&&this.dispatcher.call("dragend",this.a,this.annotation),this.a.classed("dragging",!1),this.a.selectAll("circle.handle").style("pointer-events","all")}},{key:"dragSubject",value:function(){var n=this.annotation.position;n.x+=S.dx,n.y+=S.dy,this.annotation.position=n}},{key:"dragNote",value:function(){var n=this.annotation.offset;n.x+=S.dx,n.y+=S.dy,this.annotation.offset=n}},{key:"mapHandles",value:function(n){var i=this;return n.map(function(r){return H({},r,{start:i.dragstarted.bind(i),end:i.dragended.bind(i)})})}}]),t}(),ut=function(e,n,i){return function(r){Dn(a,r);function a(o){At(this,a);var s=Fn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,o));return s.typeSettings=n,n.disable&&n.disable.forEach(function(c){s[c]&&s[c].remove(),s[c]=void 0,c==="note"&&(s.noteContent=void 0)}),s}return St(a,[{key:"className",value:function(){return""+(n.className||at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this)&&at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"className",this).call(this)||"")}},{key:"drawSubject",value:function(s){return this.typeSettings.subject=H({},n.subject,this.typeSettings.subject),at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawSubject",this).call(this,H({},s,this.typeSettings.subject))}},{key:"drawConnector",value:function(s){return this.typeSettings.connector=H({},n.connector,this.typeSettings.connector),at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawConnector",this).call(this,H({},s,n.connector,this.typeSettings.connector))}},{key:"drawNote",value:function(s){return this.typeSettings.note=H({},n.note,this.typeSettings.note),at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNote",this).call(this,H({},s,n.note,this.typeSettings.note))}},{key:"drawNoteContent",value:function(s){return at(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"drawNoteContent",this).call(this,H({},s,n.note,this.typeSettings.note))}}],[{key:"init",value:function(s,c){return at(a.__proto__||Object.getPrototypeOf(a),"init",this).call(this,s,c),i&&(s=i(s,c)),s}}]),a}(e)},Ee=function(t){Dn(e,t);function e(n){At(this,e);var i=Fn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return i.textWrap=n.textWrap||120,i.drawText(),i}return St(e,[{key:"updateTextWrap",value:function(i){this.textWrap=i,this.drawText()}},{key:"drawText",value:function(){if(this.note){Z(this.note,[this.annotation],"g","annotation-note-content");var i=this.note.select("g.annotation-note-content");Z(i,[this.annotation],"rect","annotation-note-bg"),Z(i,[this.annotation],"text","annotation-note-label"),Z(i,[this.annotation],"text","annotation-note-title");var r={height:0},a=this.a.select("text.annotation-note-label"),o=this.annotation.note&&this.annotation.note.wrap||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrap||this.textWrap,s=this.annotation.note&&this.annotation.note.wrapSplitter||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.wrapSplitter,c=this.annotation.note&&this.annotation.note.bgPadding||this.typeSettings&&this.typeSettings.note&&this.typeSettings.note.bgPadding,u={top:0,bottom:0,left:0,right:0};if(typeof c=="number"?u={top:c,bottom:c,left:c,right:c}:c&&(typeof c>"u"?"undefined":Vl(c))==="object"&&(u=H(u,c)),this.annotation.note.title){var f=this.a.select("text.annotation-note-title");f.text(this.annotation.note.title),f.attr("fill",this.annotation.color),f.attr("font-weight","bold"),f.call(Ei,o,s),r=f.node().getBBox()}a.text(this.annotation.note.label).attr("dx","0"),a.call(Ei,o,s),a.attr("y",r.height*1.1||0),a.attr("fill",this.annotation.color);var l=this.getNoteBBox();this.a.select("rect.annotation-note-bg").attr("width",l.width+u.left+u.right).attr("height",l.height+u.top+u.bottom).attr("x",l.x-u.left).attr("y",-u.top).attr("fill","white").attr("fill-opacity",0)}}}]),e}(na),hh=ut(Ee,{className:"label",note:{align:"middle"}}),Te=ut(Ee,{className:"callout",note:{lineType:"horizontal"}});ut(Te,{className:"callout elbow",connector:{type:"elbow"}});ut(Te,{className:"callout curve",connector:{type:"curve"}});ut(na,{className:"badge",subject:{type:"badge"},disable:["connector","note"]});ut(Ee,{className:"callout circle",subject:{type:"circle"},note:{lineType:"horizontal"},connector:{type:"elbow"}});ut(Ee,{className:"callout rect",subject:{type:"rect"},note:{lineType:"horizontal"},connector:{type:"elbow"}});var dh=function(t){Dn(e,t);function e(){return At(this,e),Fn(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return St(e,[{key:"mapY",value:function(i){at(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapY",this).call(this,i);var r=this.annotation;(r.subject.x1||r.subject.x2)&&r.data&&i.y&&(r.y=i.y(r.data)),(r.subject.x1||r.subject.x2)&&!r.x&&(r.x=r.subject.x1||r.subject.x2)}},{key:"mapX",value:function(i){at(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"mapX",this).call(this,i);var r=this.annotation;(r.subject.y1||r.subject.y2)&&r.data&&i.x&&(r.x=i.x(r.data)),(r.subject.y1||r.subject.y2)&&!r.y&&(r.y=r.subject.y1||r.subject.y2)}}]),e}(Te);ut(dh,{className:"callout xythreshold",subject:{type:"threshold"}});var Z=function(e,n,i,r,a){var o=e.selectAll(i+"."+(a||r)).data(n);return o.enter().append(i).merge(o).attr("class",r),o.exit().remove(),e},ph=function(e,n,i){var r=i.component,a=i.name;r&&r.on("mouseover.annotations",function(){e.call(a+"over",r,n)}).on("mouseout.annotations",function(){return e.call(a+"out",r,n)}).on("click.annotations",function(){return e.call(a+"click",r,n)})},Ei=function(e,n,i){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1.2;e.each(function(){for(var a=ct(this),o=a.text().split(i||/[ \t\r\n]+/).reverse().filter(function(f){return f!==""}),s=void 0,c=[],u=a.text(null).append("tspan").attr("x",0).attr("dy",.8+"em");s=o.pop();)c.push(s),u.text(c.join(" ")),u.node().getComputedTextLength()>n&&c.length>1&&(c.pop(),u.text(c.join(" ")),c=[s],u=a.append("tspan").attr("x",0).attr("dy",r+"em").text(s))})},Ti=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:":not(.handle)";return e?e.selectAll(n).nodes().reduce(function(i,r){var a=r.getBBox();i.x=Math.min(i.x,a.x),i.y=Math.min(i.y,a.y),i.width=Math.max(i.width,a.width);var o=r&&r.attributes&&r.attributes.y;return i.height=Math.max(i.height,(o&&parseFloat(o.value)||0)+a.height),i},{x:0,y:0,width:0,height:0}):{x:0,y:0,width:0,height:0}};function Ze(){var t=[],e=void 0,n=void 0,i=[],r={},a={},o=!1,s=void 0,c=Te,u=void 0,f=void 0,l=Cn("subjectover","subjectout","subjectclick","connectorover","connectorout","connectorclick","noteover","noteout","noteclick","dragend","dragstart"),h=void 0,d=function(y){h=y,o||y.selectAll("circle.handle").remove();var _=t.map(function(m){return m.type||(m.type=c),m.disable||(m.disable=i),new Ul(m)});e=e||new Wl({annotations:_,accessors:r,accessorsInverse:a,ids:s});var g=y.selectAll("g").data([e]);g.enter().append("g").attr("class","annotations");var x=y.select("g.annotations");Z(x,e.annotations,"g","annotation");var b=x.selectAll("g.annotation");b.each(function(m){var v=ct(this);v.attr("class","annotation"),Z(v,[m],"g","annotation-connector"),Z(v,[m],"g","annotation-subject"),Z(v,[m],"g","annotation-note"),Z(v.select("g.annotation-note"),[m],"g","annotation-note-content"),m.type=m.type.toString()==="[object Object]"?m.type:new m.type({a:v,annotation:m,textWrap:u,notePadding:f,editMode:o,dispatcher:l,accessors:r}),m.type.draw(),m.type.drawText&&m.type.drawText()})};return d.json=function(){return console.log("Annotations JSON was copied to your clipboard. Please note the annotation type is not JSON compatible. It appears in the objects array in the console, but not in the copied JSON.",e.json),window.copy(JSON.stringify(e.json.map(function(p){return delete p.type,p}))),d},d.update=function(){return t&&e&&(t=e.annotations.map(function(p){return p.type.draw(),p})),d},d.updateText=function(){return e&&(e.updateText(u),t=e.annotations),d},d.updatedAccessors=function(){return e.setPositionWithAccessors(),t=e.annotations,d},d.disable=function(p){return arguments.length?(i=p,e&&(e.updateDisable(i),t=e.annotations),d):i},d.textWrap=function(p){return arguments.length?(u=p,e&&(e.updateTextWrap(u),t=e.annotations),d):u},d.notePadding=function(p){return arguments.length?(f=p,e&&(e.updateNotePadding(f),t=e.annotations),d):f},d.type=function(p,y){return arguments.length?(c=p,e&&(e.annotations.map(function(_){_.type.note&&_.type.note.selectAll("*:not(.annotation-note-content)").remove(),_.type.noteContent&&_.type.noteContent.selectAll("*").remove(),_.type.subject&&_.type.subject.selectAll("*").remove(),_.type.connector&&_.type.connector.selectAll("*").remove(),_.type.typeSettings={},_.type=c,_.subject=y&&y.subject||_.subject,_.connector=y&&y.connector||_.connector,_.note=y&&y.note||_.note}),t=e.annotations),d):c},d.annotations=function(p){if(!arguments.length)return e&&e.annotations||t;if(t=p,e&&e.annotations){var y=t.some(function(_){return!_.type||_.type.toString()!=="[object Object]"});y?(e=null,d(h)):e.annotations=t}return d},d.context=function(p){return arguments.length?(n=p,d):n},d.accessors=function(p){return arguments.length?(r=p,d):r},d.accessorsInverse=function(p){return arguments.length?(a=p,d):a},d.ids=function(p){return arguments.length?(s=p,d):s},d.editMode=function(p){return arguments.length?(o=p,h&&h.selectAll("g.annotation").classed("editable",o),e&&(e.editMode(o),t=e.annotations),d):o},d.collection=function(p){return arguments.length?(e=p,d):e},d.on=function(){var p=l.on.apply(l,arguments);return p===l?d:p},d}var _n="http://www.w3.org/1999/xhtml";const Pi={svg:"http://www.w3.org/2000/svg",xhtml:_n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ia(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Pi.hasOwnProperty(e)?{space:Pi[e],local:t}:t}function yh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_n&&e.documentElement.namespaceURI===_n?e.createElement(t):e.createElementNS(n,t)}}function gh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ra(t){var e=ia(t);return(e.local?gh:yh)(e)}var _h=0;function Ri(){this._="@"+(++_h).toString(36)}Ri.prototype={constructor:Ri,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var aa=function(t){return function(){return this.matches(t)}};if(typeof document<"u"){var Pt=document.documentElement;if(!Pt.matches){var mh=Pt.webkitMatchesSelector||Pt.msMatchesSelector||Pt.mozMatchesSelector||Pt.oMatchesSelector;aa=function(t){return function(){return mh.call(this,t)}}}}const vh=aa;var oa={};if(typeof document<"u"){var xh=document.documentElement;"onmouseenter"in xh||(oa={mouseenter:"mouseover",mouseleave:"mouseout"})}function bh(t,e,n){return t=sa(t,e,n),function(i){var r=i.relatedTarget;(!r||r!==this&&!(r.compareDocumentPosition(this)&8))&&t.call(this,i)}}function sa(t,e,n){return function(i){try{t.call(this,this.__data__,e,n)}finally{}}}function wh(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function $h(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,r=e.length,a;n<r;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.capture):e[++i]=a;++i?e.length=i:delete this.__on}}}function Mh(t,e,n){var i=oa.hasOwnProperty(t.type)?bh:sa;return function(r,a,o){var s=this.__on,c,u=i(e,a,o);if(s){for(var f=0,l=s.length;f<l;++f)if((c=s[f]).type===t.type&&c.name===t.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=u,c.capture=n),c.value=e;return}}this.addEventListener(t.type,u,n),c={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(c):this.__on=[c]}}function Nh(t,e,n){var i=wh(t+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,u=s.length,f;c<u;++c)for(r=0,f=s[c];r<a;++r)if((o=i[r]).type===f.type&&o.name===f.name)return f.value}return}for(s=e?Mh:$h,n==null&&(n=!1),r=0;r<a;++r)this.each(s(i[r],e,n));return this}function kh(){}function ca(t){return t==null?kh:function(){return this.querySelector(t)}}function Ah(t){typeof t!="function"&&(t=ca(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=new Array(o),c,u,f=0;f<o;++f)(c=a[f])&&(u=t.call(c,c.__data__,f,a))&&("__data__"in c&&(u.__data__=c.__data__),s[f]=u);return new et(i,this._parents)}function Sh(){return[]}function Ch(t){return t==null?Sh:function(){return this.querySelectorAll(t)}}function Eh(t){typeof t!="function"&&(t=Ch(t));for(var e=this._groups,n=e.length,i=[],r=[],a=0;a<n;++a)for(var o=e[a],s=o.length,c,u=0;u<s;++u)(c=o[u])&&(i.push(t.call(c,c.__data__,u,o)),r.push(c));return new et(i,r)}function Th(t){typeof t!="function"&&(t=vh(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var a=e[r],o=a.length,s=i[r]=[],c,u=0;u<o;++u)(c=a[u])&&t.call(c,c.__data__,u,a)&&s.push(c);return new et(i,this._parents)}function ua(t){return new Array(t.length)}function Ph(){return new et(this._enter||this._groups.map(ua),this._parents)}function Me(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Me.prototype={constructor:Me,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Rh(t){return function(){return t}}var Oi="$";function Oh(t,e,n,i,r,a){for(var o=0,s,c=e.length,u=a.length;o<u;++o)(s=e[o])?(s.__data__=a[o],i[o]=s):n[o]=new Me(t,a[o]);for(;o<c;++o)(s=e[o])&&(r[o]=s)}function Ih(t,e,n,i,r,a,o){var s,c,u={},f=e.length,l=a.length,h=new Array(f),d;for(s=0;s<f;++s)(c=e[s])&&(h[s]=d=Oi+o.call(c,c.__data__,s,e),d in u?r[s]=c:u[d]=c);for(s=0;s<l;++s)d=Oi+o.call(t,a[s],s,a),(c=u[d])?(i[s]=c,c.__data__=a[s],u[d]=null):n[s]=new Me(t,a[s]);for(s=0;s<f;++s)(c=e[s])&&u[h[s]]===c&&(r[s]=c)}function Dh(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each(function(N){d[++u]=N}),d;var n=e?Ih:Oh,i=this._parents,r=this._groups;typeof t!="function"&&(t=Rh(t));for(var a=r.length,o=new Array(a),s=new Array(a),c=new Array(a),u=0;u<a;++u){var f=i[u],l=r[u],h=l.length,d=t.call(f,f&&f.__data__,u,i),p=d.length,y=s[u]=new Array(p),_=o[u]=new Array(p),g=c[u]=new Array(h);n(f,l,y,_,g,d,e);for(var x=0,b=0,m,v;x<p;++x)if(m=y[x]){for(x>=b&&(b=x+1);!(v=_[b])&&++b<p;);m._next=v||null}}return o=new et(o,i),o._enter=s,o._exit=c,o}function Fh(){return new et(this._exit||this._groups.map(ua),this._parents)}function Lh(t){for(var e=this._groups,n=t._groups,i=e.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var c=e[s],u=n[s],f=c.length,l=o[s]=new Array(f),h,d=0;d<f;++d)(h=c[d]||u[d])&&(l[d]=h);for(;s<i;++s)o[s]=e[s];return new et(o,this._parents)}function Hh(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&a!==o.nextSibling&&a.parentNode.insertBefore(o,a),a=o);return this}function qh(t){t||(t=Bh);function e(l,h){return l&&h?t(l.__data__,h.__data__):!l-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,c=r[a]=new Array(s),u,f=0;f<s;++f)(u=o[f])&&(c[f]=u);c.sort(e)}return new et(r,this._parents).order()}function Bh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zh(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function jh(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function Vh(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function Xh(){var t=0;return this.each(function(){++t}),t}function Uh(){return!this.node()}function Wh(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r=e[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&t.call(s,s.__data__,a,r);return this}function Yh(t){return function(){this.removeAttribute(t)}}function Gh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Zh(t,e){return function(){this.setAttribute(t,e)}}function Kh(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Jh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Qh(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function td(t,e){var n=ia(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?Gh:Yh:typeof e=="function"?n.local?Qh:Jh:n.local?Kh:Zh)(n,e))}function fa(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ed(t){return function(){this.style.removeProperty(t)}}function nd(t,e,n){return function(){this.style.setProperty(t,e,n)}}function id(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function rd(t,e,n){var i;return arguments.length>1?this.each((e==null?ed:typeof e=="function"?id:nd)(t,e,n??"")):fa(i=this.node()).getComputedStyle(i,null).getPropertyValue(t)}function ad(t){return function(){delete this[t]}}function od(t,e){return function(){this[t]=e}}function sd(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function cd(t,e){return arguments.length>1?this.each((e==null?ad:typeof e=="function"?sd:od)(t,e)):this.node()[t]}function la(t){return t.trim().split(/^|\s+/)}function Ln(t){return t.classList||new ha(t)}function ha(t){this._node=t,this._names=la(t.getAttribute("class")||"")}ha.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function da(t,e){for(var n=Ln(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function pa(t,e){for(var n=Ln(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function ud(t){return function(){da(this,t)}}function fd(t){return function(){pa(this,t)}}function ld(t,e){return function(){(e.apply(this,arguments)?da:pa)(this,t)}}function hd(t,e){var n=la(t+"");if(arguments.length<2){for(var i=Ln(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ld:e?ud:fd)(n,e))}function dd(){this.textContent=""}function pd(t){return function(){this.textContent=t}}function yd(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function gd(t){return arguments.length?this.each(t==null?dd:(typeof t=="function"?yd:pd)(t)):this.node().textContent}function _d(){this.innerHTML=""}function md(t){return function(){this.innerHTML=t}}function vd(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function xd(t){return arguments.length?this.each(t==null?_d:(typeof t=="function"?vd:md)(t)):this.node().innerHTML}function bd(){this.nextSibling&&this.parentNode.appendChild(this)}function wd(){return this.each(bd)}function $d(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Md(){return this.each($d)}function Nd(t){var e=typeof t=="function"?t:ra(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function kd(){return null}function Ad(t,e){var n=typeof t=="function"?t:ra(t),i=e==null?kd:typeof e=="function"?e:ca(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function Sd(){var t=this.parentNode;t&&t.removeChild(this)}function Cd(){return this.each(Sd)}function Ed(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ya(t,e,n){var i=fa(t),r=i.CustomEvent;r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Td(t,e){return function(){return ya(this,t,e)}}function Pd(t,e){return function(){return ya(this,t,e.apply(this,arguments))}}function Rd(t,e){return this.each((typeof e=="function"?Pd:Td)(t,e))}function et(t,e){this._groups=t,this._parents=e}et.prototype={constructor:et,select:Ah,selectAll:Eh,filter:Th,data:Dh,enter:Ph,exit:Fh,merge:Lh,order:Hh,sort:qh,call:zh,nodes:jh,node:Vh,size:Xh,empty:Uh,each:Wh,attr:td,style:rd,property:cd,classed:hd,text:gd,html:xd,raise:wd,lower:Md,append:Nd,insert:Ad,remove:Cd,datum:Ed,on:Nh,dispatch:Rd};function Ne(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Od(t){return t=Ne(Math.abs(t)),t?t[1]:NaN}function Id(t,e){return function(n,i){for(var r=n.length,a=[],o=0,s=t[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),a.push(n.substring(r-=s,r+s)),!((c+=s+1)>i));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Dd(t,e){t=t.toPrecision(e);t:for(var n=t.length,i=1,r=-1,a;i<n;++i)switch(t[i]){case".":r=a=i;break;case"0":r===0&&(r=i),a=i;break;case"e":break t;default:r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(a+1):t}var ga;function Fd(t,e){var n=Ne(t,e);if(!n)return t+"";var i=n[0],r=n[1],a=r-(ga=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Ne(t,Math.max(0,e+a-1))[0]}function Ii(t,e){var n=Ne(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const _a={"":Dd,"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ii(t*100,e)},r:Ii,s:Fd,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var Ld=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Di(t){return new ma(t)}function ma(t){if(!(e=Ld.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",i=e[2]||">",r=e[3]||"-",a=e[4]||"",o=!!e[5],s=e[6]&&+e[6],c=!!e[7],u=e[8]&&+e[8].slice(1),f=e[9]||"";f==="n"?(c=!0,f="g"):_a[f]||(f=""),(o||n==="0"&&i==="=")&&(o=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=a,this.zero=o,this.width=s,this.comma=c,this.precision=u,this.type=f}ma.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var Fi=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Hd(t){return t}function qd(t){var e=t.grouping&&t.thousands?Id(t.grouping,t.thousands):Hd,n=t.currency,i=t.decimal;function r(o){o=Di(o);var s=o.fill,c=o.align,u=o.sign,f=o.symbol,l=o.zero,h=o.width,d=o.comma,p=o.precision,y=o.type,_=f==="$"?n[0]:f==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",g=f==="$"?n[1]:/[%p]/.test(y)?"%":"",x=_a[y],b=!y||/[defgprs%]/.test(y);p=p==null?y?6:12:/[gprs]/.test(y)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function m(v){var N=_,k=g,A,E,C;if(y==="c")k=x(v)+k,v="";else{v=+v;var M=(v<0||1/v<0)&&(v*=-1,!0);if(v=x(v,p),M){for(A=-1,E=v.length,M=!1;++A<E;)if(C=v.charCodeAt(A),48<C&&C<58||y==="x"&&96<C&&C<103||y==="X"&&64<C&&C<71){M=!0;break}}if(N=(M?u==="("?u:"-":u==="-"||u==="("?"":u)+N,k=k+(y==="s"?Fi[8+ga/3]:"")+(M&&u==="("?")":""),b){for(A=-1,E=v.length;++A<E;)if(C=v.charCodeAt(A),48>C||C>57){k=(C===46?i+v.slice(A+1):v.slice(A))+k,v=v.slice(0,A);break}}}d&&!l&&(v=e(v,1/0));var w=N.length+v.length+k.length,$=w<h?new Array(h-w+1).join(s):"";switch(d&&l&&(v=e($+v,$.length?h-k.length:1/0),$=""),c){case"<":return N+v+k+$;case"=":return N+$+v+k;case"^":return $.slice(0,w=$.length>>1)+N+v+k+$.slice(w)}return $+N+v+k}return m.toString=function(){return o+""},m}function a(o,s){var c=r((o=Di(o),o.type="f",o)),u=Math.max(-8,Math.min(8,Math.floor(Od(s)/3)))*3,f=Math.pow(10,-u),l=Fi[8+u/3];return function(h){return c(f*h)+l}}return{format:r,formatPrefix:a}}var te;Bd({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function Bd(t){return te=qd(t),te.format,te.formatPrefix,te}var zd={value:function(){}};function Ke(t){this._=t}function jd(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ke.prototype={constructor:Ke,on:function(t,e){var n=this._,i=jd(t+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(t=i[a]).type)&&(r=Vd(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(r=(t=i[a]).type)n[r]=Li(n[r],t.name,e);else if(e==null)for(r in n)n[r]=Li(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ke(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,r=a.length;i<r;++i)a[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,a=i.length;r<a;++r)i[r].value.apply(e,n)}};function Vd(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function Li(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=zd,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}function va(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Xd(t){return t.length===1&&(t=Ud(t)),{left:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)<0?i=a+1:r=a}return i},right:function(e,n,i,r){for(i==null&&(i=0),r==null&&(r=e.length);i<r;){var a=i+r>>>1;t(e[a],n)>0?r=a:i=a+1}return i}}}function Ud(t){return function(e,n){return va(t(e),n)}}Xd(va);var z="$";function ke(){}ke.prototype=xa.prototype={constructor:ke,has:function(t){return z+t in this},get:function(t){return this[z+t]},set:function(t,e){return this[z+t]=e,this},remove:function(t){var e=z+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===z&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===z&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===z&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===z&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===z&&++t;return t},empty:function(){for(var t in this)if(t[0]===z)return!1;return!0},each:function(t){for(var e in this)e[0]===z&&t(this[e],e.slice(1),this)}};function xa(t,e){var n=new ke;if(t instanceof ke)t.each(function(s,c){n.set(c,s)});else if(Array.isArray(t)){var i=-1,r=t.length,a;if(e==null)for(;++i<r;)n.set(i,t[i]);else for(;++i<r;)n.set(e(a=t[i],i,t),a)}else if(t)for(var o in t)n.set(o,t[o]);return n}function Hi(){}var lt=xa.prototype;Hi.prototype={constructor:Hi,has:lt.has,add:function(t){return t+="",this[z+t]=t,this},remove:lt.remove,clear:lt.clear,values:lt.keys,size:lt.size,empty:lt.empty,each:lt.each};function Pe(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Hn(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Ct(){}var mt=.7,kt=1/mt,wt="\\s*([+-]?\\d+)\\s*",zt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Q="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Wd=/^#([0-9a-f]{3,8})$/,Yd=new RegExp("^rgb\\("+[wt,wt,wt]+"\\)$"),Gd=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$"),Zd=new RegExp("^rgba\\("+[wt,wt,wt,zt]+"\\)$"),Kd=new RegExp("^rgba\\("+[Q,Q,Q,zt]+"\\)$"),Jd=new RegExp("^hsl\\("+[zt,Q,Q]+"\\)$"),Qd=new RegExp("^hsla\\("+[zt,Q,Q,zt]+"\\)$"),qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pe(Ct,qn,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Bi,formatHex:Bi,formatHsl:t0,formatRgb:zi,toString:zi});function Bi(){return this.rgb().formatHex()}function t0(){return wa(this).formatHsl()}function zi(){return this.rgb().formatRgb()}function qn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Wd.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ji(e):n===3?new I(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?ee(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?ee(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Yd.exec(t))?new I(e[1],e[2],e[3],1):(e=Gd.exec(t))?new I(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Zd.exec(t))?ee(e[1],e[2],e[3],e[4]):(e=Kd.exec(t))?ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Jd.exec(t))?Ui(e[1],e[2]/100,e[3]/100,1):(e=Qd.exec(t))?Ui(e[1],e[2]/100,e[3]/100,e[4]):qi.hasOwnProperty(t)?ji(qi[t]):t==="transparent"?new I(NaN,NaN,NaN,0):null}function ji(t){return new I(t>>16&255,t>>8&255,t&255,1)}function ee(t,e,n,i){return i<=0&&(t=e=n=NaN),new I(t,e,n,i)}function ba(t){return t instanceof Ct||(t=qn(t)),t?(t=t.rgb(),new I(t.r,t.g,t.b,t.opacity)):new I}function e0(t,e,n,i){return arguments.length===1?ba(t):new I(t,e,n,i??1)}function I(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}Pe(I,e0,Hn(Ct,{brighter:function(t){return t=t==null?kt:Math.pow(kt,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?mt:Math.pow(mt,t),new I(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vi,formatHex:Vi,formatRgb:Xi,toString:Xi}));function Vi(){return"#"+Je(this.r)+Je(this.g)+Je(this.b)}function Xi(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function Je(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function Ui(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new K(t,e,n,i)}function wa(t){if(t instanceof K)return new K(t.h,t.s,t.l,t.opacity);if(t instanceof Ct||(t=qn(t)),!t)return new K;if(t instanceof K)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),a=Math.max(e,n,i),o=NaN,s=a-r,c=(a+r)/2;return s?(e===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-e)/s+2:o=(e-n)/s+4,s/=c<.5?a+r:2-a-r,o*=60):s=c>0&&c<1?0:o,new K(o,s,c,t.opacity)}function n0(t,e,n,i){return arguments.length===1?wa(t):new K(t,e,n,i??1)}function K(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Pe(K,n0,Hn(Ct,{brighter:function(t){return t=t==null?kt:Math.pow(kt,t),new K(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?mt:Math.pow(mt,t),new K(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new I(Qe(t>=240?t-240:t+120,r,i),Qe(t,r,i),Qe(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function Qe(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var i0=Math.PI/180,r0=180/Math.PI,$a=-.14861,Bn=1.78277,zn=-.29227,Re=-.90649,jt=1.97294,Wi=jt*Re,Yi=jt*Bn,Gi=Bn*zn-Re*$a;function a0(t){if(t instanceof yt)return new yt(t.h,t.s,t.l,t.opacity);t instanceof I||(t=ba(t));var e=t.r/255,n=t.g/255,i=t.b/255,r=(Gi*i+Wi*e-Yi*n)/(Gi+Wi-Yi),a=i-r,o=(jt*(n-r)-zn*a)/Re,s=Math.sqrt(o*o+a*a)/(jt*r*(1-r)),c=s?Math.atan2(o,a)*r0-120:NaN;return new yt(c<0?c+360:c,s,r,t.opacity)}function nt(t,e,n,i){return arguments.length===1?a0(t):new yt(t,e,n,i??1)}function yt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}Pe(yt,nt,Hn(Ct,{brighter:function(t){return t=t==null?kt:Math.pow(kt,t),new yt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?mt:Math.pow(mt,t),new yt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*i0,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new I(255*(e+n*($a*i+Bn*r)),255*(e+n*(zn*i+Re*r)),255*(e+n*(jt*i)),this.opacity)}}));function Ma(t){return function(){return t}}function Na(t,e){return function(n){return t+n*e}}function o0(t,e){var n=e-t;return n?Na(t,n>180||n<-180?n-360*Math.round(n/360):n):Ma(isNaN(t)?e:t)}function se(t,e){var n=e-t;return n?Na(t,n):Ma(isNaN(t)?e:t)}function ka(t){return function e(n){n=+n;function i(r,a){var o=t((r=nt(r)).h,(a=nt(a)).h),s=se(r.s,a.s),c=se(r.l,a.l),u=se(r.opacity,a.opacity);return function(f){return r.h=o(f),r.s=s(f),r.l=c(Math.pow(f,n)),r.opacity=u(f),r+""}}return i.gamma=e,i}(1)}ka(o0);var jn=ka(se);function ft(t){return t.match(/.{6}/g).map(function(e){return"#"+e})}ft("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");ft("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");ft("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");ft("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");jn(nt(300,.5,0),nt(-240,.5,1));jn(nt(-100,.75,.35),nt(80,1.5,.8));jn(nt(260,.75,.35),nt(80,1.5,.8));nt();function Oe(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Oe(ft("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));Oe(ft("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));Oe(ft("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));Oe(ft("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));const V={t:20,r:50,b:20,l:125},Rt=1200-(V.r+V.l),Lt=925-(V.t+V.b),s0=async t=>{const n=(await ku("data/ufc_weight.csv",g=>({event:g.EVENT.slice(3),fighter:g.FIGHTER,w_c:g.WEIGHT_CLASS,f_n_w:Number(g.FIGHT_NIGHT_WEIGHT),perc_regained:Number(g.PERCENTAGE_REGAINED),sex:g.SEX,w_i:Number(g.WEIGHT_INCREASE),w_i_w:Number(g.WEIGH_IN_WEIGHT)}))).sort((g,x)=>g.w_i-x.w_i).filter(g=>g.perc_regained>=10),r=Kn(t).append("svg").attr("height",Rt+(V.r+V.l)).attr("width",Lt+(V.l+V.r)).append("g").attr("transform",`translate(${V.l},${V.t})`),a=Tr().domain([0,qa(n,g=>g.w_i)]).range([0,Lt]).nice(),o=Lu([0,...n.map(g=>g.fighter)],[Rt,0]);r.append("g").attr("class","y-axis").call(Ga(o)),r.append("g").attr("class","x-axis").attr("transform",`translate(0, ${Rt})`).call(Ya(a)).call(g=>g.selectAll(".tick line").clone().attr("y1",-1025).attr("stroke-opacity",.1)),r.append("g").selectAll("line").data(n).join("line").attr("x1",g=>a(0)).attr("x2",g=>a(g.w_i)).attr("y1",g=>o(g.fighter)).attr("y2",g=>o(g.fighter)).attr("stroke-width",1).attr("stroke","grey"),r.append("g").selectAll("text").data(n).join("text").attr("x",g=>a(g.w_i)+2).attr("y",g=>o(g.fighter)+2.5).attr("font-size","10px").attr("fill","grey").text(g=>`${g.w_i}`),r.append("g").append("line").attr("x1",g=>a(.3)).attr("x2",g=>a(.3)).attr("y1",g=>o(0)).attr("y2",-10).attr("stroke-width",1).attr("stroke","rgba(255,0,0, 0.80)").attr("stroke-dasharray","5 5 5 5"),r.append("g").append("text").attr("x",a(.3)+5).attr("y",-2.5).attr("font-size","12px").text("<- SAFE 1 day wight loss 0.3lbs");const s=hh,c=n.filter(g=>g.fighter==="Geoff Neal"),u=[{note:{title:"Geoff Neal weight increased  30.3lbs",label:"Neal missed weight at ufc 285 by 4 pounds. Resorting to an even more extreme weight cut he made weight at 170.5 at UFC 298 cutting over 30lbs.",bgPadding:5,wrap:200},connector:{end:"arrow",type:"line",lineType:"vertical"},data:c[0],className:"show-bg",x:a(c[0].w_i)+18,y:o(c[0].fighter)+5,dx:55,dy:25}],f=Ze().notePadding(15).type(s).annotations(u);r.append("g").attr("class","annotation-group").call(f);const l=n.filter(g=>g.fighter==="Paulo Costa"),h=[{note:{title:"Paulo Costa weighed in at 185.5 but has a normal body weight of 211lbs ",label:"Paulo faught at a more normal weight in UFC fight Night 196 at 205lbs becuase acosta admitted to weighing 211lbs (his walk around weight) Wensday before the fight. source-3",bgPadding:5,wrap:200},connector:{end:"arrow",type:"line",lineType:"vertical"},data:l[0],className:"show-bg",x:a(l[0].w_i)+18,y:o(l[0].fighter)+5,dx:15,dy:225}],d=Ze().notePadding(15).type(s).annotations(h);r.append("g").attr("class","annotation-group").call(d),r.append("g").append("text").attr("x",Lt-22).attr("y",Rt-2).attr("font-size","12px").attr("fill","#555").text("lbs"),r.append("g").append("text").attr("x",-50).attr("y",-10).attr("font-size","12px").attr("fill","#222").text("Fighter");const p=n.filter(g=>g.fighter==="Aspen Ladd"),y=[{note:{title:"Aspen Ladd regained 17.79% of her body weight",label:"The most in the dataset. She was visibly shaking when she weighed in at 135lbs and was knocked out in 16 seconds. video links below",bgPadding:5,wrap:200},connector:{end:"arrow",type:"line",lineType:"vertical"},data:p[0],className:"show-bg",x:a(p[0].w_i)+18,y:o(p[0].fighter)+5,dx:7,dy:400}],_=Ze().notePadding(15).type(s).annotations(y);r.append("g").attr("class","annotation-group").call(_),r.append("g").append("text").attr("x",Lt-22).attr("y",Rt-2).attr("font-size","12px").attr("fill","#555").text("lbs"),r.append("g").append("text").attr("x",-50).attr("y",-10).attr("font-size","12px").attr("fill","#222").text("Fighter"),Kn(".y-axis").select(".tick").remove()};document.querySelector("#app").innerHTML=`
  <div class='main-grid' style="grid-template-columns: 1fr ${Lt+(V.l+V.r)}px 1fr;">
    <div></div>
    <div>
    <div id="title">
    <div id="mainTitle">
    UFC Fighters Lose a Dangerous Amount of Weight During Extreme Weight Cuts
    </div>
    <div class="subTitle">
    UFC fighters use <strong>extreme dehydration</strong> techniques. These include, 1. Water Manipulation, this is the practice of water loading, drinking excess water for a week then extreme water restriction the 24hrs before weigh in. 2. Induced Sweating, fighters will sit for hours in the sauna, take hot baths with salt, and wear sweat suits to lose gallons of sweat. 3. Sodium Manipulation, intaking excessive sodium then eliminating salt 48 hours before a match triggering a drastic water release. 4. Extreme Exercise, fighters will participate in steady state cardio for hours to sweat.
    </div>

    <div class="subTitle">
    All of these techniques cause a fighter to lose a <strong>dangerous amount of body weight </strong> in a 24-hour period. Fighters have <strong>died </strong> from this process, and many suffer long-term consequences.
    </div>

    <div class="subTitle">
    All research shows that losing more than 2 pounds in a week can be a threat to your health. This means on average <strong>losing more than 0.3 lbs per day</strong> is potentially dangerous to one's health.<sub>1</sub>
    </div>
    <div class="subTitle">
    CSAC (California State Athletic Commission) is the only commission that releases Fight Night Weights (the weight a fighter weighs right before they step into the Octagon).
    The CSAC flags and warns any fighter that increases their weight from weigh-in to fight night by <strong>10% or more</strong> as especially dangerous, becuase of potential long-term health effects from dehydration.
    In all the data CSAC has released, <strong>51% of fighters have passed this 10% threshold</strong>, with the <strong>average weight regained being 10.22%</strong>.
    Below is a visualization showing all the fighters in the dataset who surpassed the 10% threshold, contrasted with healthy one-day weight loss to show how extreme and dangerous weight cuts are.
    
    </div>
    
    <div id="authorTitle">
      By: <a id="me" href="https://bsky.app/profile/truesync.bsky.social">Nathan Harris</a>     <a href="https://bsky.app/profile/truesync.bsky.social">@truesync.bsky.social</a> <a href="http://nathanharris.co">nathanharris.co</a> 
    </div>

    </div>
    <div id="chart"></div> 
      

    <div class="subSourcesVideo">
     Video : <a target="_blank"  href="https://www.youtube.com/shorts/PRZEylWrwTU">Geoff Neal UFC 298 weigh in at 170.5lbs </a>   &nbsp; &nbsp; Video:<a target="_blank" href ="https://www.youtube.com/watch?v=tleFsF9Q0BM"> Geoff Neal in the octogan full body 30lbs heavier at 200.8lbs, UFC 298 </a>
    <div>

    <div class="subSourcesVideo">
     Video : <a target="_blank" href="https://www.youtube.com/shorts/gZnB-pL5WMY">Paulo Costa weigh in UFC 298 at 185.5lbs </a>   &nbsp; &nbsp; Video:<a target="_blank" href ="https://www.youtube.com/watch?v=LYntCdZOy8U"> Paulo Costa weigh in UFC Fight Night 196 at a more normal 204.5lbs weight.  </a> The contrast is startling.
    <div>

    <div class="subSourcesVideo">
     Video : <a target="_blank" href="https://www.youtube.com/watch?v=iGMUKC0t5R4">Aspen Ladd visibly shaken and can hardly walk at her 135lb weigh in </a>   &nbsp; &nbsp; Video:<a target="_blank" href ="https://www.youtube.com/watch?v=2ZxjUZiWozc"> Reaction to Aspen Ladd 16 second knock out.  </a>
    <div>

    <div class="subSourcesVideo">
     Video  : <a target="_blank"  href="https://www.youtube.com/watch?v=yf-h7BjD-WI"> Paddy the Baddy Documents his Weight cut including preforming an extrem weight cut of over 15lbs in the 15 hours before weigh in. </a>
    <div>
    <div style="margin-top:16px;">
    <div class="subSources">
    1. https://www.nhlbi.nih.gov/health/educational/lose_wt/recommen.htm
    </div>

    <div class="subSources">
    3. https://www.sherdog.com/news/news/Marvin-Vettori-Paulo-Costa-Agree-to-Meet-at-205-Pounds-for-UFC-Fight-Night-196-Headliner-182526
    </div>
    </div>
    <div id="links">
    <a href ="https://bsky.app/intent/compose?text=Patrick%20Mahomes%20and%20the%20KC%20Chiefs%20dug%20themselves%20a%20Historic%20half%20time%20deficit%20the%202nd%20worse%20ever.%20Explore%20Super%20Bowl%20comebacks%20and%20more%20in%20this%20Visualization%20http%3A%2F%2F https://nharrisanalyst.github.io/superbowlhalf/" class='sm-link'>
      <svg class="w-6 h-6 " xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 568 501"><title>Bluesky butterfly logo</title><path fill="currentColor" d="M123.121 33.664C188.241 82.553 258.281 181.68 284 234.873c25.719-53.192 95.759-152.32 160.879-201.21C491.866-1.611 568-28.906 568 57.947c0 17.346-9.945 145.713-15.778 166.555-20.275 72.453-94.155 90.933-159.875 79.748C507.222 323.8 536.444 388.56 473.333 453.32c-119.86 122.992-172.272-30.859-185.702-70.281-2.462-7.227-3.614-10.608-3.631-7.733-.017-2.875-1.169.506-3.631 7.733-13.43 39.422-65.842 193.273-185.702 70.281-63.111-64.76-33.89-129.52 80.986-149.071-65.72 11.185-139.6-7.295-159.875-79.748C9.945 203.659 0 75.291 0 57.946 0-28.906 76.135-1.612 123.121 33.664Z"></path></svg>
    </a>
    <div id="tweet-this">
    <a href="https://twitter.com/intent/tweet?hashtags=NFL&text=Explore Super Bowl Halftime Deficits&url=https://nharrisanalyst.github.io/superbowlhalf/" class="twitter-share-button" data-show-count="false">Tweet</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script>
    </div>
    <div id="reddit-this">
      <a href="https://reddit.com/submit?url=https%3A%2F%2Fnharrisanalyst.github.io%2Fsuperbowlhalf%2F&title=Patrick Mahomes and The Kansas City Chiefs Dug Themselves a Historic Unsurmountable Half Time Deficit." onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;" title="Share on Reddit" rel="noopener" >Share on Reddit</a>
    </div>
    <div id="newsletter">
       <div id="newsletter-title"> subscribe to my Data Visualization newsletter &nbsp; &nbsp; </div>
      <iframe src="https://embeds.beehiiv.com/da2f7bb3-4c1d-43cd-bb63-8094b70fa63f?slim=true" data-test-id="beehiiv-embed" height="52" frameborder="0" scrolling="no" style="margin: 0; border-radius: 0px !important; background-color: transparent;"></iframe>
      </div>
    </div>
    </div>
    <div></div>
  </div>
`;s0(document.querySelector("#chart"));
